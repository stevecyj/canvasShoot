{"version":3,"sources":["boss.js","circle.js","enemy.js","index.js","polygon.js","prop.js","shooter.js","triangle.js","utility.js"],"names":["Boss","args","def","axisRotateR","axisRotateAngle","rotate","scale","axisRotateAngleV","rotateV","bullets","HP","beforeGenerateEnemyTime","Date","beginAppear","isAppearing","isDisappeared","appearTimes","appearTimer","disappearTimer","Object","assign","ctx","save","translate","originPos","x","y","degToPi","fillStyle","beginPath","moveTo","lineTo","closePath","fill","globalColor","orange","white","red","blue","strokeStyle","lineWidth","arc","Math","PI","stroke","restore","forEach","bullet","draw","appear","idx","arr","update","game","isEnd","gameCrawler","textContent","TweenLite","to","ease","Expo","easeOut","rotateNum","getRandom","onComplete","setTimeout","isPause","shoot","generateEnemy","disappear","playSound","push","BossBullet","p","rotateAngle","waveLength","num","chooseEnemy","circles","Circle","isBossGenerate","triangles","Triangle","polygons","Polygon","whole","big","small","random","color","moveX","moveXV","waveFreq","waveAmp","waveFlow","isBoss","drawWaveBullet","enemyMethods","attackShooter","r","axisRotateRV","beforeRotateTime","isRotating","circleBigR","circleSmallR","subAxisRotateR","cos","sin","$triLineTo","isStart","approach","rotateTime","Power2","hitShooter","i","timer","CirBullet","clearTimeout","Back","config","from","enemy","isPolygon","shooter","shooterBody","cirSolidLineW","distance","seconds","updateFPS","dieEffect","enemyR","effectX","effectY","colorRGB","dieTime","effect","shadowColor","shadowBlur","effectR","baseLog","requestAnimationFrame","enemies","enemyIdx","type","enemyAxisRotateR","enemyAxisRotateAngle","shieldAngleRange","state","abs","mouseMoveAngle","judgeWhatEnemyHit","splice","polygonR","attackShooterResult","shieldR","shieldLineW","isProtect","bulletIdx","bulletLen","shooterShield","bulletRotate","angleGap","currentLevel","boss","shooterHPBarOriginW","shooterHPBarW","shooterHPBar","offsetWidth","isAttacked","style","width","hearts","shooterHeart","document","querySelectorAll","parentNode","removeChild","endGame","crawlerClearedTimer","playerName","bossDieResult","bgm","pause","currentTime","victoryBgm","play","volume","updateTime","yellow","blueDark","props","startBtn","getElementById","restartBtn","starsBtn","backBtn","restartBtnStars","cover","gamePanel","batteryInfo","heartWrapper","prop","propImg","propLastTime","batteryNum","result","panel","container","keyboard","gameTime","gameLevel","warning","resultBoss","resultBattery","resultBullet","rankingNum","resultRanking","resultScore","resultStars","starWrapper1","starWrapper2","starWrapper3","canvas","getContext","ww","wh","gameW","gameH","gameHalfDiagonalL","initCanvas","height","round","sqrt","documentElement","clientWidth","clientHeight","coverCircle","coverTriangle","coverPolygon","Game","subTris","blockV","countdownSeconds","hpRecoverTimer","countdownTimer","countupTimer","propGeneratedTimer","propGeneratedInterval","beatBossSeconds","isMuted","isDisplayStars","addEventListener","handleMouseMove","handleClick","window","handleKeyup","handlePlayerName","checkPlayerName","startGame","isMob","classList","add","remove","drawCover","render","setBlockV","recoverShooterHPBar","handleGameStars","fillRect","drawBlock","circle","triangle","polygon","subTriangle","drawMouse","Shooter","rotateR","mouseMovePosX","mouseMovePos","mouseMovePosY","length","display","value","innerHTML","heart","createElement","appendChild","cursor","pointerEvents","countdownStartTime","setLevel","generateProp","clearCrawler","loadingIcon","bulletNum","handleGameResult","countdownTime","countupTime","name","level","battery","axios","get","params","then","res","data","rank","totalPlayers","firstStarData","firstData","secondStarData","secondData","thirdStarData","thirdData","starScoreHTML","fillStarScore","wave","bat","propName","Prop","src","minutes","floor","trueSeconds","TimeSeconds","TimeMinutes","nowHPW","recoverHPBarW","form","angle","initLevel","setEnemy","handleLoad","init","evt","atan2","beforeShootTime","key","pauseGame","muted","isJustSplite","drawLightning","rotateDirection","Circ","rNum","img","Image","complete","drawImage","replace","split","getProp","outerR","x1","y1","x2","y2","shootTime","ShooterBullet","lastTime","recoverHeart","drawCrackdownEffect","countLastTime","displayPropInfo","crackdownTime","polygonWholeR","polygonBigR","polygonSmallR","bodyLen","v","anglePanFn","shotRRangeFn","bulletMoveLen","cirIdx","asin","attackEnemy","triIdx","lengthX","lengthY","polyIdx","sideA","attackPolygon","NaN","beyondBoundary","enemyAnglePan","enemyAngleMinus","enemyAngleAdd","shotAngleRange","judgeShotAngleRange","shotRRange","sideB1Len","sideB2Len","angleAB1","angleAB2","rotateAngleJudge","polyAxisRotateAngle","polyRotate","sideB1","sideB2","sideC1","cosineFormula","sideC2","bottomJudge","topJudge","angleB1","angleB2","getAngleB","polyAngleMinus","polyAngleAdd","shooterRotateAngle","shooterAnglePan","shooterAngleMinus","shooterAngleAdd","beforeRotateAxisAngleTime","isGeneratedSub","shootTimer","triOuterBigR","triInnerBigR","triInnerSmallR","rotateAxisAngleTime","randomRotateAngle","Power0","easeNone","easeInOut","TriSub","order","TriBullet","isReproduceMoving","Power1","easeIn","angleAdd","degree","log","a","b","c","acos","min","max","instrument","note","duration","timeout","synth","Tone","MembraneSynth","toMaster","triggerAttackRelease","DuoSynth","MonoSynth","Synth","navigator","userAgent","match"],"mappings":"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","file":"index.js","sourcesContent":["class Boss {\n  constructor(args) {\n    const def = {\n      axisRotateR: 0,\n      axisRotateAngle: 0,\n      rotate: 0,\n      scale: 0,\n      // axisRotateRV: 1,\n      axisRotateAngleV: 1,\n      rotateV: 1,\n      bullets: [],\n      HP: 24,\n      beforeGenerateEnemyTime: new Date(),\n      beginAppear: true,\n      isAppearing: false,\n      isDisappeared: false,\n      appearTimes: 0,\n      appearTimer: null,\n      disappearTimer: null,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    ctx.save();\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\n      ctx.scale(this.scale, this.scale);\n      ctx.rotate(this.rotate * degToPi);\n      // 透明頭\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\n      ctx.beginPath();\n      ctx.moveTo(0, 0);\n      ctx.lineTo(11, 0);\n      ctx.lineTo(18, 6);\n      ctx.lineTo(18, 15);\n      ctx.lineTo(-18, 15);\n      ctx.lineTo(-18, 6);\n      ctx.lineTo(-11, 0);\n      ctx.closePath();\n      ctx.fill();\n      // 黃頭\n      ctx.fillStyle = globalColor.orange;\n      ctx.beginPath();\n      ctx.moveTo(0, 9);\n      ctx.lineTo(11, 9);\n      ctx.lineTo(18, 15);\n      ctx.lineTo(18, 36);\n      ctx.lineTo(-18, 36);\n      ctx.lineTo(-18, 15);\n      ctx.lineTo(-11, 9);\n      ctx.closePath();\n      ctx.fill();\n      // 裝飾內透明頭\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.25)';\n      ctx.beginPath();\n      ctx.moveTo(0, 9 + 8);\n      ctx.lineTo(4, 9 + 8);\n      ctx.lineTo(14, 24);\n      ctx.lineTo(14, 36 - 8);\n      ctx.lineTo(-14, 36 - 8);\n      ctx.lineTo(-14, 24);\n      ctx.lineTo(-4, 9 + 8);\n      ctx.closePath();\n      ctx.fill();\n      // 右白肩\n      ctx.fillStyle = globalColor.white;\n      ctx.beginPath();\n      ctx.moveTo(18, -6);\n      ctx.lineTo(18 + 8, -6);\n      ctx.lineTo(18 + 8 + 8, 15);\n      ctx.lineTo(18 + 8 + 8, 36 + 6);\n      ctx.lineTo(18, 36 + 6);\n      ctx.closePath();\n      ctx.fill();\n      // 左白肩\n      ctx.fillStyle = globalColor.white;\n      ctx.beginPath();\n      ctx.moveTo(-18, -6);\n      ctx.lineTo(-18 - 8, -6);\n      ctx.lineTo(-18 - 8 - 8, 15);\n      ctx.lineTo(-18 - 8 - 8, 36 + 6);\n      ctx.lineTo(-18, 36 + 6);\n      ctx.closePath();\n      ctx.fill();\n      // 右紅翼\n      ctx.fillStyle = globalColor.red;\n      ctx.beginPath();\n      ctx.moveTo(18 + 8 + 8, 9);\n      ctx.lineTo(18 + 8 + 8 + 8, 9);\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6);\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6 + 8);\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8);\n      ctx.closePath();\n      ctx.fill();\n      // 左藍翼\n      ctx.fillStyle = globalColor.blue;\n      ctx.beginPath();\n      ctx.moveTo(-18 - 8 - 8 + 4, 9);\n      ctx.lineTo(-18 - 8 - 8 - 8 + 4, 9);\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\n      ctx.closePath();\n      ctx.fill();\n      // 右灰風口\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\n      ctx.beginPath();\n      ctx.moveTo(18 + 8 + 8, 36 + 6 + 8);\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8 + 6);\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8 + 6);\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8);\n      ctx.fill();\n      // 左灰風口\n      ctx.beginPath();\n      ctx.moveTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8 + 6);\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8 + 6);\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8);\n      ctx.fill();\n      // 右裝飾白圈\n      ctx.strokeStyle = globalColor.white;\n      ctx.lineWidth = 2.8;\n      ctx.beginPath();\n      ctx.arc(18 + 8 + 8 + 11, 36 + 6 - 2, 4.4, 0, Math.PI * 2);\n      ctx.stroke();\n      // 左裝飾黃叉\n      ctx.strokeStyle = globalColor.orange;\n      // ctx.lineWidth = 2.8;\n      ctx.beginPath();\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16);\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16 + 9.6);\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16);\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16 + 9.6);\n      ctx.stroke();\n      // 左裝飾透明四邊形\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.24)';\n      ctx.beginPath();\n      ctx.moveTo(-18 - 8 - 8 - 8 - 16 + 4 + 4, 36 + 6 - 8.25);\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\n      ctx.lineTo(-18 - 8 - 8 - 6 + 4, 36 + 6 + 8);\n      ctx.closePath();\n      ctx.fill();\n    ctx.restore();\n    // 繪製 boss 子彈\n    this.bullets.forEach((bullet) => {\n      bullet.draw();\n    });\n  }\n  update() {\n    // boss 出現\n    this.beginAppear && this.appear();\n    this.beginAppear = false;\n    if (!this.isAppearing && !this.isDisappeared) {\n    }\n    // 更新 boss 子彈\n    this.bullets.forEach((bullet, idx, arr) => {\n      bullet.update(idx, arr);\n    });\n  }\n  appear() {\n    if (game.isEnd) return;\n    this.appearTimes += 1;\n    this.isDisappeared = false;\n    this.isAppearing = true;\n    gameCrawler.textContent = '⚠ BOSS IS COMING';\n    TweenLite.to(this, 1.2, {\n      scale: 1,\n      ease: Expo.easeOut,\n    });\n    const rotateNum = getRandom(45, 135);\n    TweenLite.to(this, 1.6, {\n      axisRotateAngle: `+=${rotateNum}`,\n      rotate: `+=${rotateNum}`,\n      ease: Expo.easeOut,\n      onComplete: () => {\n        this.isAppearing = false;\n      },\n    });\n    if (this.appearTimes && this.appearTimes % 3) {\n      setTimeout(() => {\n        if (this.HP === 0 || game.isPause) return;\n        this.shoot();\n      }, getRandom(1000, 2000));\n    } else {\n      setTimeout(() => {\n        if (this.HP === 0 || game.isPause) return;\n        this.generateEnemy();\n      }, getRandom(1000, 2000));\n    }\n    this.disappearTimer = setTimeout(() => {\n      if (this.HP === 0 || game.isPause) return;\n      this.disappear();\n    }, getRandom(3000, 4000));\n    playSound('membrane', 'A4', '4n');\n  }\n  disappear() {\n    if (game.isEnd) return;\n    this.isDisappeared = true;\n    TweenLite.to(this, 1.2, {\n      scale: 0,\n      ease: Expo.easeOut,\n    });\n    const rotateNum = getRandom(45, 225);\n    TweenLite.to(this, 1.6, {\n      axisRotateAngle: `+=${rotateNum}`,\n      rotate: `+=${rotateNum}`,\n      ease: Expo.easeOut,\n    });\n    this.appearTimer = setTimeout(() => {\n      if (this.HP === 0 || game.isPause) return;\n      this.appear();\n    }, 2000);\n    playSound('membrane', 'F3', '4n');\n  }\n  shoot() {\n    this.bullets.push(new BossBullet({\n      p: {\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\n      },\n      rotateAngle: this.rotate,\n      axisRotateR: this.axisRotateR,\n    }));\n    playSound('mono', 'F2', '4n', 0, -10);\n    setTimeout(() => {\n      this.bullets.push(new BossBullet({\n        p: {\n          x: originPos(this.axisRotateR, this.axisRotateAngle).x,\n          y: originPos(this.axisRotateR, this.axisRotateAngle).y,\n        },\n        rotateAngle: this.rotate,\n        waveLength: 14,\n        axisRotateR: this.axisRotateR,\n      }));\n      playSound('mono', 'F2', '4n', 0, -10);\n    }, 200);\n  }\n  generateEnemy() {\n    let num;\n    const chooseEnemy = () => {\n      num = getRandom(1, 3);\n      switch (num) {\n        case 1:\n          game.circles.push(new Circle({\n            axisRotateR: this.axisRotateR,\n            axisRotateAngle: this.axisRotateAngle % 360,\n            axisRotateAngleV: -(getRandom(2, 8) / 10),\n            rotate: getRandom(0, 360),\n            isBossGenerate: true,\n          }));\n          break;\n        case 2:\n          game.triangles.push(new Triangle({\n            axisRotateR: this.axisRotateR,\n            axisRotateAngle: this.axisRotateAngle % 360,\n            axisRotateAngleV: getRandom(2, 8) / 10,\n            rotate: this.axisRotateAngle % 360,\n            isBossGenerate: true,\n          }));\n          break;\n        case 3:\n          const rotate = getRandom(0, 360);\n          game.polygons.push(new Polygon({\n            axisRotateR: {\n              whole: this.axisRotateR,\n              big: this.axisRotateR,\n              small: this.axisRotateR,\n            },\n            axisRotateAngle: {\n              whole: this.axisRotateAngle % 360,\n              big: this.axisRotateAngle % 360,\n              small: this.axisRotateAngle % 360,\n            },\n            rotate: {\n              whole: rotate,\n              big: rotate,\n              small: rotate,\n            },\n            rotateV: getRandom(4, 8) / 10,\n            isBossGenerate: true,\n          }));\n          break;\n        default:\n          break;\n      }\n    }\n    chooseEnemy();\n    chooseEnemy();\n    if (Math.random() >= 0.5) {\n      setTimeout(() => {\n        chooseEnemy();\n      }, 400);\n    }\n  }\n}\n\nclass BossBullet {\n  constructor(args) {\n    const def = {\n      p: {\n        x: 0,\n        y: 0,\n      },\n      axisRotateR: 0,\n      color: globalColor.orange,\n      moveX: 8,\n      moveXV: 4,\n      rotateAngle: 0,\n      waveLength: 22,\n      waveFreq: 0.3,\n      waveAmp: 4,\n      waveFlow: 3,\n      isBoss: true,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    ctx.save();\n      ctx.translate(this.p.x, this.p.y);\n      ctx.rotate((this.rotateAngle - 90) * degToPi);\n      // 開始畫 boss 子彈\n      drawWaveBullet(this, 'moveX', 2.4, 'rgba(245, 175, 95, 0.72)');\n    ctx.restore();\n  }\n  update(idx, arr) {\n    // boss 子彈移動\n    this.moveX += this.moveXV;\n    enemyMethods.attackShooter(this, idx, arr);\n  }\n}","class Circle {\n  constructor(args) {\n    const def = {\n      axisRotateR: 0,\n      axisRotateAngle: 0,\n      r: 22,\n      rotate: 0,\n      scale: 0,\n      axisRotateRV: 0,\n      axisRotateAngleV: 0,\n      // rotateV: 0,\n      color: globalColor.orange,\n      HP: 2,\n      bullets: [],\n      beforeRotateTime: new Date(),\n      isRotating: false,\n      beginAppear: true,\n      isBossGenerate: false,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n\n\n  draw() {\n    const circleBigR = this.r + 5;\n    const circleSmallR = this.r - 10;\n    const subAxisRotateR = 14;\n    ctx.save();\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\n    ctx.rotate(this.rotate * degToPi);\n    ctx.scale(this.scale, this.scale);\n    // 大淡圓\n    ctx.beginPath();\n    ctx.arc(4, 0, circleBigR, 0, Math.PI * 2);\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\n    ctx.fill();\n    // 小淡圓\n    ctx.beginPath();\n    ctx.arc(-20, 0, circleSmallR, 0, Math.PI * 2);\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\n    ctx.fill();\n    // 主體圓\n    ctx.beginPath();\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    // 小三圓\n    ctx.beginPath();\n    ctx.fillStyle = globalColor.white;\n    // ctx.arc(subAxisRotateR, 0, 2.4, 0, Math.PI * 2);\n    ctx.arc(subAxisRotateR * Math.cos(60 * degToPi), subAxisRotateR * Math.sin(60 * degToPi), 2.4, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.beginPath();\n    ctx.arc(subAxisRotateR * Math.cos(180 * degToPi), subAxisRotateR * Math.sin(180 * degToPi), 2.4, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.beginPath();\n    ctx.arc(subAxisRotateR * Math.cos(300 * degToPi), subAxisRotateR * Math.sin(300 * degToPi), 2.4, 0, Math.PI * 2);\n    ctx.fill();\n    // 神經\n    ctx.beginPath();\n    ctx.fillStyle = globalColor.white;\n    ctx.lineTo(-8, 0);\n    ctx.$triLineTo(-2, 32);\n    ctx.$triLineTo(-12, 120);\n    ctx.$triLineTo(-2.4, 176);\n    ctx.$triLineTo(-8, 240);\n    ctx.$triLineTo(-1.6, 320);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n    // 繪製圓形子彈\n    this.bullets.forEach((bullet) => {\n      bullet.draw();\n    });\n  }\n\n\n  update(idx) {\n    this.beginAppear && this.appear(this.isBossGenerate);\n    this.beginAppear = false;\n    game.isStart && enemyMethods.approach(this);\n    // 更新圓形子彈\n    this.bullets.forEach((bullet, idx, arr) => {\n      bullet.update(idx, arr);\n    });\n    // 當圓形自身在旋轉時，圓形不要移動\n    if (!this.isRotating) {\n      this.axisRotateAngle += this.axisRotateAngleV;\n    }\n    // 每 4-8 秒，自身旋轉一次\n    const rotateTime = new Date();\n    if ((rotateTime - this.beforeRotateTime) > getRandom(4000, 8000)) {\n      this.isRotating = true;\n      TweenLite.to(this, 0.4, {\n        // rotate: this.axisRotateAngle - 180,\n        // rotate: this.axisRotateAngle % 360,\n        rotate: this.axisRotateAngle,\n        ease: Power2.easeOut,\n        // 自身旋轉完後射擊\n        onComplete: () => {\n          this.isRotating = false;\n          if (!game.isStart) return;\n          this.shoot();\n        },\n      });\n      this.beforeRotateTime = rotateTime;\n    }\n    // 當圓形撞上 shooter\n    enemyMethods.hitShooter(game.circles, idx, 'circle', this.axisRotateR, this.axisRotateAngle);\n  }\n\n\n  shoot() {\n    // 射 1-2 發\n    for (let i = 0; i < getRandom(1, 2); i += 1) {\n      const timer = setTimeout(() => {\n        this.bullets.push(new CirBullet({\n          p: {\n            x: originPos(this.axisRotateR, this.axisRotateAngle).x,\n            y: originPos(this.axisRotateR, this.axisRotateAngle).y,\n          },\n          rotateAngle: this.rotate,\n          moveX: -this.r - 10,\n          // rotateAngle: Math.sin(this.rotate * degToPi),\n          axisRotateR: this.axisRotateR,\n        }));\n        clearTimeout(timer);\n        // 間隔 0.2-0.4 秒\n      }, i * getRandom(200, 400));\n    }\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK🤕' : 'ATTACK⚡️';\n    playSound('membrane', 'D5');\n  }\n\n\n  appear(isBossGenerate) {\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\n    // gameCrawler.innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>ENEMY IS COMING!';\n    TweenLite.to(this, 0.8, {\n      scale: 1,\n      ease: Back.easeOut.config(1.7),\n    });\n    TweenLite.from(this, 1.6, {\n      rotate: 0,\n      ease: Back.easeOut.config(1.7),\n    });\n    if (isBossGenerate) {\n      TweenLite.to(this, 1.6, {\n        axisRotateR: `+=${getRandom(80, 160)}`,\n        ease: Power2.easeOut,\n      });\n    }\n    game.isStart && playSound('synth', 'F4', '4n');\n    // playSound('synth', 'B4', '8n', 50);\n  }\n}\n\n\n\nclass CirBullet {\n  constructor(args) {\n    const def = {\n      p: {\n        x: 0,\n        y: 0,\n      },\n      axisRotateR: 0,\n      color: globalColor.orange,\n      moveX: 0,\n      moveXV: -4.5,\n      // v: 4,\n      rotateAngle: 0,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    ctx.save();\n      ctx.translate(this.p.x, this.p.y);\n      ctx.rotate(this.rotateAngle * degToPi); \n      ctx.beginPath();\n      ctx.arc(this.moveX, 0, 4, 0, Math.PI * 2);\n      ctx.fillStyle = this.color;\n      ctx.fill();\n    ctx.restore();\n  }\n  update(idx, arr) {\n    // 圓形子彈移動\n    this.moveX += this.moveXV;\n    // 子彈擊中 shooter\n    enemyMethods.attackShooter(this, idx, arr);\n  }\n}","/* \n ** 敵人方法\n */\nconst enemyMethods = {\n  // 逼近 shooter\n  approach(enemy) {\n    const axisRotateR = enemy.axisRotateR;\n    const isPolygon = typeof(axisRotateR) === 'object';\n    if (!enemy.axisRotateRV) {\n      const shooter = game.shooter;\n      const shooterBody = (shooter.r + (shooter.cirSolidLineW / 2));\n      const distance = (isPolygon ? axisRotateR.whole : (axisRotateR - enemy.r)) - shooterBody;\n      const seconds =  getRandom(30, 40);\n      enemy.axisRotateRV = -(distance / (seconds * updateFPS));\n    }\n    if (isPolygon) {\n      if (enemy.HP.whole) {\n        axisRotateR.small = axisRotateR.big = axisRotateR.whole += enemy.axisRotateRV;\n      } else {\n        // 重物引力較強\n        axisRotateR.big += enemy.axisRotateRV * getRandom(3, 4);\n        // 輕物引力較弱\n        axisRotateR.small += enemy.axisRotateRV * getRandom(1, 4);\n      }\n    } else {\n      enemy.axisRotateR += enemy.axisRotateRV;\n    }\n  },\n\n\n  // 死亡效果\n  dieEffect(enemyR, effectX, effectY, colorRGB, isBoss = false) {\n    let dieTime = 1;\n    let effect = () => {\n      if (!game.isPause) {\n        dieTime += 1;\n      }\n      ctx.beginPath();\n      ctx.save();\n      ctx.strokeStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 46})`;\n      ctx.fillStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 230})`;\n      ctx.shadowColor = `rgba(${colorRGB}, 0.48)`;\n      ctx.shadowBlur = 2;\n      ctx.lineWidth = 2;\n      const effectR = enemyR * baseLog(3, (((dieTime - 2) / 46) * 8) + 1);\n      ctx.arc(effectX, effectY, effectR, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.stroke();\n      ctx.restore();\n      // }\n      if (dieTime < 48) {\n        requestAnimationFrame(effect);\n      }\n    }\n    requestAnimationFrame(effect);\n    if (!isBoss) {\n      setTimeout(() => {\n        gameCrawler.textContent = 'ENEMY DIES😇';\n      }, 0);\n    }\n    // playSound('duo', 'F4', '4n');\n    playSound('synth', 'G2', '8n', 0, 25);\n    playSound('duo', 'F2', '4n', 0, 15);\n    playSound('duo', 'E2', '4n', 0, 10);\n  },\n\n\n  // 敵人撞擊 shooter 判定\n  hitShooter(enemies, enemyIdx, type, enemyAxisRotateR, enemyAxisRotateAngle) {\n    const enemy = enemies[enemyIdx];\n    const shooter = game.shooter;\n    let shieldAngleRange;\n    if (shooter.state !== 'shield') {\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\n    } else {\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (90 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (270 * degToPi);\n    }\n    // const shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\n    // 判斷是多邊形或其它敵人撞上 shooter\n    const judgeWhatEnemyHit = function () {\n      if (type !== 'big' && type !== 'small') {\n        enemies.splice(enemyIdx, 1);\n        // 移除敵人效果\n        if (type !== 'whole') {\n          const colorRGB = type === 'circle' ? '245, 175, 95' : '54, 118, 187';\n          enemyMethods.dieEffect(enemy.r, originPos(enemyAxisRotateR, enemyAxisRotateAngle).x, originPos(enemyAxisRotateR, enemyAxisRotateAngle).y, colorRGB);\n        } else {\n          const polygonR = (34 + 22) / 2;\n          enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\n        }\n      } else {\n        enemy.HP[type] -= 1;\n        const polygonR = type === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\n        enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\n        if (enemy.HP.big === 0 && enemy.HP.small === 0) {\n          enemies.splice(enemyIdx, 1);\n        }\n      }\n    }\n    // 當敵人撞上 shooter 主體\n    if (enemyAxisRotateR <= (shooter.r + (shooter.cirSolidLineW / 2))) {\n      // shooter.HP -= 1;\n      judgeWhatEnemyHit();\n      enemyMethods.attackShooterResult();\n      playSound('membrane', 'B4');\n      // 當敵人撞上 shooter 護盾\n    } else if (shieldAngleRange && (enemyAxisRotateR <= (shooter.shieldR + (shooter.shieldLineW / 2)))) {\n      judgeWhatEnemyHit();\n      shooter.isProtect = true;\n      gameCrawler.textContent = 'BLOCK😉';\n      playSound('membrane', 'D4');\n    }\n  },\n\n\n  // 敵人子彈擊中 shooter 判定\n  attackShooter(bullet, bulletIdx, bullets, bulletLen = 0) {\n    const shooter = game.shooter;\n    const shooterBody = shooter.r + (shooter.cirSolidLineW / 2);\n    const shooterShield = shooter.shieldR + (shooter.shieldLineW / 2);\n    // 當敵人子彈擊中 shooter 主體\n    if (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterBody + bulletLen))) {\n      // 子彈擊中後\n      enemyMethods.attackShooterResult();\n      // 移除敵人子彈\n      bullets.splice(bulletIdx, 1);\n      bullet.isBoss ? playSound('mono', 'C2', '8n', 0, -10) : playSound('membrane', 'B4');\n    }\n    // 當敵人子彈射中 shooter 的護盾\n    const bulletRotate = bullet.isBoss ? bullet.rotateAngle + 90 : bullet.rotateAngle;\n    const angleGap = Math.abs((mouseMoveAngle / degToPi) - ((bulletRotate % 360) + (bulletRotate < 0 ? 360 : 0)));\n    let shieldAngleRange;\n    if (shooter.state !== 'shield') {\n      shieldAngleRange = (angleGap >= 135) && (angleGap <= 225);\n    } else {\n      shieldAngleRange = (angleGap >= 90) && (angleGap <= 270);\n    }\n    if (shieldAngleRange && (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterShield + bulletLen)))) {\n      // 移除子彈\n      bullets.splice(bulletIdx, 1);\n      gameCrawler.textContent = 'BLOCK😉';\n      playSound('membrane', 'D4');\n    }\n  },\n\n\n  // 敵人撞擊或子彈擊中 shooter 後\n  attackShooterResult() {\n    if (!game.isStart || (game.currentLevel === 10 && !game.boss)) return;\n    const shooter = game.shooter;\n    const shooterHPBarOriginW = 216;\n    // 命條減 1/3\n    const shooterHPBarW = shooterHPBar.offsetWidth - (shooterHPBarOriginW / 3);\n    shooter.isAttacked = true;\n    // shooter 命減 1\n    // shooter.HP -= 1;\n    shooterHPBar.style.width = `${shooterHPBarW < 0 ? 0 : shooterHPBarW}px`;\n    // 若 shooter 已經沒有命條\n    if (shooterHPBarW <= 0) {\n      // 若 shooter 還有愛心\n      if (shooter.hearts) {\n        // 減掉一顆愛心\n        const shooterHeart = document.querySelectorAll('.panel__game-heart');\n        shooterHeart[0].parentNode.removeChild(shooterHeart[0]);\n        shooter.hearts -= 1;\n        // 回復命條\n        shooterHPBar.style.width = `${shooterHPBarOriginW}px`;\n      } else {\n        // 如果沒有愛心，結束遊戲\n        game.endGame();\n        playSound('synth', 'A3');\n        playSound('synth', 'E2', '8n', 160);\n        playSound('synth', 'A2', '8n', 320);\n        clearTimeout(game.crawlerClearedTimer);\n        gameCrawler.textContent = `YOU, ${game.playerName}💀, ARE DEAD`;\n        return;\n      }\n    }\n    gameCrawler.textContent = Math.random() >= 0.5 ? 'OUCH😣' : 'UGGH😫';\n  },\n\n\n  bossDieResult() {\n    let boss = game.boss;\n    enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '245, 175, 95', true);\n    setTimeout(() => {\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '54, 118, 187', true);\n    }, 300);\n    setTimeout(() => {\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '231, 70, 93', true);\n    }, 600);\n    game.boss = null;\n    // 改變背景音樂\n    bgm.pause();\n    bgm.currentTime = 0;\n    victoryBgm.play();\n    victoryBgm.volume = 0.5;\n    // 3 秒後，結束遊戲\n    setTimeout(() => {\n      game.endGame();\n    }, 3000);\n    clearTimeout(game.crawlerClearedTimer);\n    gameCrawler.textContent = 'BOSS DIES!!!🎊';\n  }\n}","/* Environment Variable */\nconst updateFPS = 30;\nlet updateTime = 0;\n\nconst globalColor = {\n    red: \"#e7465d\",\n    orange: \"#f5af5f\",\n    yellow: \"#f7b52c\",\n    blue: \"#3676bb\",\n    blueDark: \"#001d2e\",\n    white: \"#fff\"\n};\n\nconst props = [\"heart\", \"crackdown\", \"shield\", \"double\", \"wave\"];\n\n/* GUI Controls */\n// const controls = {\n// amp: 8,\n// freq: 0.3,\n// testAngle: 40,\n// }\n\n// const gui = new dat.GUI();\n// gui.add(controls, 'testAngle', 0, 90).step(1).onChange((value) => {});\n// gui.add(controls, 'freq', 0, 1).step(0.1).onChange((value) => {});\n\nconst startBtn = document.getElementById(\"start-btn\");\nconst restartBtn = document.getElementById(\"restart-btn\");\nconst starsBtn = document.getElementById(\"stars-btn\");\nconst backBtn = document.getElementById(\"back-btn\");\nconst restartBtnStars = document.getElementById(\"restart-btn--stars\");\n\nconst cover = document.getElementById(\"cover\");\nconst gamePanel = document.getElementById(\"game-panel\");\nconst batteryInfo = document.getElementById(\"battery-info\");\nconst shooterHPBar = document.getElementById(\"hp\");\nconst heartWrapper = document.getElementById(\"heart-wrapper\");\nconst prop = document.getElementById(\"prop\");\nconst propImg = document.getElementById(\"prop__img\");\nconst propLastTime = document.getElementById(\"prop__last-time\");\nconst batteryNum = document.getElementById(\"battery-num\");\nconst result = document.getElementById(\"game-result\");\n// const resultNum = document.getElementById('result-num');\nconst panel = document.getElementById(\"panel\");\nconst container = document.getElementById(\"container\");\nconst keyboard = document.getElementById(\"keyboard\");\nconst gameTime = document.getElementById(\"game-time\");\nconst gameLevel = document.getElementById(\"game-level\");\nconst gameCrawler = document.getElementById(\"game-crawler\");\nconst playerName = document.getElementById(\"player-name\");\nconst warning = document.getElementById(\"warning\");\n\nconst resultBoss = document.getElementById(\"result-boss\");\nconst resultBattery = document.getElementById(\"result-battery\");\nconst resultBullet = document.getElementById(\"result-bullet\");\n// const totalPlayers = document.getElementById('total-players');\nconst rankingNum = document.getElementById(\"ranking-num\");\n\nconst resultRanking = document.getElementById(\"result-ranking\");\nconst resultScore = document.getElementById(\"result-score\");\nconst resultStars = document.getElementById(\"result-stars\");\n\n// const share = document.getElementById('share');\nconst bgm = document.getElementById(\"bgm\");\nconst victoryBgm = document.getElementById(\"victory-bgm\");\n\nconst starWrapper1 = document.getElementById(\"star-wrapper1\");\nconst starWrapper2 = document.getElementById(\"star-wrapper2\");\nconst starWrapper3 = document.getElementById(\"star-wrapper3\");\n\n// const shareFb = document.getElementById(\"share-fb\");\n// const shareTwitter = document.getElementById(\"share-twitter\");\n\n/* Initialize Canvas Settings */\nconst canvas = document.getElementById(\"game\");\nconst ctx = canvas.getContext(\"2d\");\nlet ww;\nlet wh;\nlet gameW;\nlet gameH;\nlet gameHalfDiagonalL;\n\nfunction initCanvas() {\n    gameW = canvas.width;\n    gameH = canvas.height;\n    gameHalfDiagonalL = Math.round(Math.sqrt(canvas.width * canvas.width + canvas.height * canvas.height) / 2);\n    ww = document.documentElement.clientWidth;\n    wh = document.documentElement.clientHeight;\n}\n\nconst degToPi = Math.PI / 180;\nlet coverCircle;\nlet coverTriangle;\nlet coverPolygon;\nlet game;\n\nclass Game {\n    constructor(args) {\n        const def = {\n            shooter: null,\n            prop: null,\n            batteryNum: 0,\n            circles: [],\n            triangles: [],\n            polygons: [],\n            subTris: [],\n            isStart: false,\n            isEnd: false,\n            isPause: false,\n            blockV: {\n                x: -2,\n                y: 2\n            },\n            currentLevel: 0,\n            countdownSeconds: 0,\n            // countupSeconds: 0,\n            hpRecoverTimer: null,\n            countdownTimer: null,\n            countupTimer: null,\n            propGeneratedTimer: null,\n            crawlerClearedTimer: null,\n            propGeneratedInterval: 200,\n            boss: null,\n            playerName: \"\",\n            beatBossSeconds: 0,\n            isMuted: false,\n            isDisplayStars: false\n        };\n        Object.assign(def, args);\n        Object.assign(this, def);\n    }\n    init() {\n        canvas.addEventListener(\"mousemove\", handleMouseMove);\n        canvas.addEventListener(\"click\", handleClick);\n        window.addEventListener(\"keyup\", handleKeyup);\n        handlePlayerName();\n        startBtn.addEventListener(\"click\", () => {\n            if (!this.checkPlayerName()) return;\n            this.startGame();\n        });\n        restartBtn.addEventListener(\"click\", () => {\n            this.startGame();\n        });\n        restartBtnStars.addEventListener(\"click\", () => {\n            this.startGame();\n        });\n        // 檢查是否為手機\n        if (isMob()) {\n            playerName.classList.add(\"dpn\");\n            startBtn.classList.add(\"dpn\");\n            warning.classList.remove(\"dpn\");\n        }\n        this.drawCover();\n        this.render();\n        this.update();\n        // 初始化方格移動速率與計時器\n        this.setBlockV();\n        // 緩慢恢復 shooter 生命條\n        this.recoverShooterHPBar();\n        starsBtn.addEventListener(\"click\", () => {\n            resultRanking.classList.add(\"dpn\");\n            resultScore.classList.add(\"dpn\");\n            resultStars.classList.remove(\"dpn\");\n            result.classList.add(\"t20\");\n            if (!this.isDisplayStars) {\n                this.handleGameStars();\n            }\n            this.isDisplayStars = true;\n        });\n        backBtn.addEventListener(\"click\", function() {\n            resultRanking.classList.remove(\"dpn\");\n            resultScore.classList.remove(\"dpn\");\n            resultStars.classList.add(\"dpn\");\n            result.classList.remove(\"t20\");\n        });\n    }\n    render() {\n        // if (!this.isPause) {\n        ctx.fillStyle = globalColor.blueDark;\n        ctx.fillRect(0, 0, gameW, gameH);\n        // 繪製方格\n        this.drawBlock();\n        if (!this.isStart && !this.isEnd) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(gameW / 2, gameH / 2, 264, 0, Math.PI * 2);\n            ctx.strokeStyle = \"rgba(255, 255, 255, 0.3)\";\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.arc(gameW / 2, gameH / 2, 184, 0, Math.PI * 2);\n            ctx.lineWidth = 1.6;\n            ctx.strokeStyle = globalColor.white;\n            ctx.stroke();\n            ctx.restore();\n        }\n        // 繪製 shooter\n        this.shooter.draw();\n        // 繪製每個 circle\n        this.circles.forEach(circle => {\n            circle.draw();\n        });\n        // 繪製每個 triangle\n        this.triangles.forEach(triangle => {\n            triangle.draw();\n        });\n        // 繪製每個 polygon\n        this.polygons.forEach(polygon => {\n            polygon.draw();\n        });\n        // 繪製每個 sub triangle\n        this.subTris.forEach(subTriangle => {\n            subTriangle.draw();\n        });\n        // 繪製 prop（道具）\n        this.prop && this.prop.draw();\n        // 繪製魔王\n        this.boss && this.boss.draw();\n        if (this.isStart) {\n            // 繪製滑鼠\n            this.drawMouse();\n        }\n        requestAnimationFrame(() => {\n            this.render();\n        });\n    }\n    update() {\n            updateTime += 1;\n            if (!this.isPause && !this.isEnd) {\n                // 更新 shooter\n                this.shooter.update();\n                // 更新每個 circle\n                this.circles.forEach((circle, idx) => {\n                    circle.update(idx);\n                });\n                // 更新每個 triangle\n                this.triangles.forEach((triangle, idx) => {\n                    triangle.update(idx);\n                });\n                // 更新每個 polygon\n                this.polygons.forEach((polygon, idx) => {\n                    polygon.update(idx);\n                });\n                // 更新每個 sub triangle\n                this.subTris.forEach((subTriangle, idx) => {\n                    subTriangle.update(idx);\n                });\n                // 更新 prop（道具）\n                this.prop && this.prop.update();\n                // 更新魔王\n                this.boss && this.boss.update();\n            }\n            setTimeout(() => {\n                this.update();\n            }, 1000 / updateFPS);\n        }\n        // 設置封面\n    drawCover() {\n            this.shooter = new Shooter();\n            // 圓形\n            this.circles.push(\n                new Circle({\n                    axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\n                    axisRotateAngle: 225,\n                    axisRotateAngleV: -(getRandom(2, 8) / 10),\n                    rotate: getRandom(0, 360)\n                })\n            );\n            // 三角形\n            this.triangles.push(\n                new Triangle({\n                    axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\n                    axisRotateAngle: 45,\n                    axisRotateAngleV: getRandom(2, 8) / 10,\n                    rotate: 45\n                })\n            );\n            // 多邊形\n            const rotateR = getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5);\n            const rotate = getRandom(0, 360);\n            const rotateV = getRandom(4, 8) / 10;\n            this.polygons.push(\n                new Polygon({\n                    axisRotateR: {\n                        whole: rotateR,\n                        big: rotateR,\n                        small: rotateR\n                    },\n                    axisRotateAngle: {\n                        whole: 315,\n                        big: 315,\n                        small: 315\n                    },\n                    rotate: {\n                        whole: rotate,\n                        big: rotate,\n                        small: rotate\n                    },\n                    rotateV\n                })\n            );\n        }\n        // 畫方格\n    drawBlock() {\n            ctx.save();\n            ctx.beginPath();\n            ctx.strokeStyle = \"rgba(255, 255, 255, 0.16)\";\n            ctx.lineWidth = 0.4;\n            // 畫橫列\n            for (let i = 0; i < 18; i += 1) {\n                ctx.moveTo(i * 56 + ((updateTime * this.blockV.x) % 56), 0);\n                ctx.lineTo(i * 56 + ((updateTime * this.blockV.x) % 56), gameH);\n            }\n            // 畫直行\n            for (let i = 0; i < 14; i += 1) {\n                ctx.moveTo(0, i * 52 + ((updateTime * this.blockV.y) % 52));\n                ctx.lineTo(gameW, i * 52 + ((updateTime * this.blockV.y) % 52));\n            }\n            ctx.stroke();\n            ctx.restore();\n        }\n        // 畫滑鼠\n    drawMouse() {\n            const mouseMovePosX = mouseMovePos.x + gameW / 2;\n            const mouseMovePosY = mouseMovePos.y + gameH / 2;\n            const length = 12;\n            ctx.save();\n            ctx.translate(mouseMovePosX, mouseMovePosY);\n            ctx.strokeStyle = globalColor.white;\n            ctx.lineWidth = 0.8;\n            ctx.beginPath();\n            ctx.moveTo(-length, 0);\n            ctx.lineTo(length, 0);\n            ctx.moveTo(0, -length);\n            ctx.lineTo(0, length);\n            ctx.stroke();\n            ctx.restore();\n            ctx.fillStyle = globalColor.white;\n            ctx.beginPath();\n            ctx.arc(mouseMovePosX, mouseMovePosY, 1.6, 0, Math.PI * 2);\n            ctx.fill();\n        }\n        // 設定方格移動速率\n    setBlockV() {\n            setTimeout(() => {\n                this.blockV.x = Math.random() * 8 - 4;\n                this.blockV.y = Math.random() * 8 - 4;\n                this.setBlockV();\n            }, 8000);\n        }\n        // 開始遊戲（當讀者按下 'Start Play' or 'Restart' 按鈕）\n    startGame() {\n            this.isStart = true;\n            this.isEnd = false;\n            // 移除封面\n            cover.style.display = \"none\";\n            // 顯示遊戲介面\n            gamePanel.style.display = \"block\";\n            // 電池資訊歸零\n            this.batteryNum = 0;\n            batteryNum.textContent = this.batteryNum;\n            // 重設生命條\n            shooterHPBar.style.width = \"216px\";\n            // 取得玩家名\n            this.playerName = playerName.value;\n            // 初始化 shooter\n            this.shooter = new Shooter();\n            // 三個愛心命\n            heartWrapper.innerHTML = \"\";\n            for (let i = 0; i < this.shooter.hearts; i++) {\n                const heart = document.createElement(\"DIV\");\n                heart.classList.add(\"panel__game-heart\");\n                heartWrapper.appendChild(heart);\n            }\n            // 清空敵人與子彈\n            this.circles.forEach(circle => {\n                circle.bullets = [];\n            });\n            this.triangles.forEach(triangle => {\n                triangle.bullets = [];\n                triangle.HP = 0;\n            });\n            this.circles = [];\n            this.triangles = [];\n            this.polygons = [];\n            if (this.boss) {\n                this.boss.bullets = [];\n                this.boss = null;\n            }\n            // 隱藏預設滑鼠\n            container.style.cursor = \"none\";\n            // 隱藏結果\n            result.classList.add(\"op0\");\n            // 讓滑鼠點擊無效\n            panel.style.pointerEvents = \"none\";\n            // 顯示獲得電池資訊\n            batteryInfo.classList.remove(\"op0\");\n            // 顯示鍵盤指示\n            keyboard.classList.remove(\"op0\");\n            // 清空關卡字\n            gameLevel.textContent = \"\";\n            // 回到第 0 關\n            this.currentLevel = 0;\n            // 倒數計時 2 秒\n            this.countdownSeconds = 3;\n\n            gameCrawler.textContent = `👋${this.playerName}👋`;\n            gameTime.textContent = `00:0${this.countdownSeconds}”`;\n            const countdownStartTime = () => {\n                setTimeout(() => {\n                    if (this.countdownSeconds === 0) {\n                        this.currentLevel += 1;\n                        this.setLevel(this.currentLevel);\n                        // 開始產生道具\n                        this.generateProp();\n                        // 開始清除跑馬燈\n                        this.clearCrawler();\n                        return;\n                    }\n                    this.countdownSeconds -= 1;\n                    gameTime.textContent = `00:0${this.countdownSeconds}”`;\n                    switch (this.countdownSeconds) {\n                        case 2:\n                            gameCrawler.textContent = \"🌊WAVES ARE COMING🌊\";\n                            break;\n                        case 1:\n                            gameCrawler.textContent = \"😈ARE YOU READY😈\";\n                            break;\n                        case 0:\n                            gameCrawler.textContent = \"🔥🔥GO🔥🔥\";\n                            break;\n                        default:\n                            break;\n                    }\n                    playSound(\"synth\", \"G4\");\n                    countdownStartTime();\n                }, 1000);\n            };\n            countdownStartTime();\n            playSound(\"synth\", \"C#5\");\n            playSound(\"synth\", \"E5\", \"8n\", 160);\n            // 改變背景音樂\n            victoryBgm.pause();\n            victoryBgm.currentTime = 0;\n            bgm.play();\n            bgm.volume = 0.5;\n            // 遊戲結果返回第一頁\n            resultRanking.classList.remove(\"dpn\");\n            resultScore.classList.remove(\"dpn\");\n            resultStars.classList.add(\"dpn\");\n            result.classList.remove(\"t20\");\n            // 將遊戲結果換成 loading 圖示\n            const loadingIcon = '<img src=\"./img/loading.svg\" alt=\"loading icon\" />';\n            rankingNum.innerHTML = loadingIcon;\n            starWrapper1.innerHTML = loadingIcon;\n            starWrapper2.innerHTML = loadingIcon;\n            starWrapper3.innerHTML = loadingIcon;\n            // 開啟讓 stars 重新取資料的開關\n            this.isDisplayStars = false;\n        }\n        // 遊戲結束\n    endGame() {\n            this.isStart = false;\n            this.isEnd = true;\n            // 貼上電池數量\n            // resultNum.textContent = this.batteryNum;\n            // 填上結果\n            if (this.currentLevel !== 10) {\n                resultBoss.textContent = \"NO\";\n            } else {\n                resultBoss.textContent = this.beatBossSeconds;\n            }\n            resultBattery.textContent = this.batteryNum;\n            resultBullet.textContent = this.shooter.bulletNum;\n            // 顯示結果\n            result.classList.remove(\"op0\");\n            // 隱藏電池分數資訊\n            batteryInfo.classList.add(\"op0\");\n            // 隱藏鍵盤指示\n            keyboard.classList.add(\"op0\");\n            // 移除道具顯示介面\n            prop.classList.add(\"op0\");\n            // 顯示預設滑鼠\n            container.style.cursor = \"auto\";\n            // 讓滑鼠可以點擊\n            panel.style.pointerEvents = \"auto\";\n            this.handleGameResult();\n            clearTimeout(this.countdownTimer);\n            clearTimeout(this.countupTimer);\n            clearTimeout(this.propGeneratedTimer);\n        }\n        // 暫停遊戲\n    pauseGame() {\n        if (!this.currentLevel) return;\n        this.isPause = !this.isPause;\n        if (this.isPause) {\n            clearTimeout(this.countdownTimer);\n            clearTimeout(this.countupTimer);\n            clearTimeout(this.propGeneratedTimer);\n            clearTimeout(this.crawlerClearedTimer);\n        } else {\n            this.generateProp();\n            this.clearCrawler();\n            if (!this.boss) {\n                this.countdownTime();\n            } else {\n                this.countupTime();\n                if (this.boss.isDisappeared) {\n                    clearTimeout(this.boss.appearTimer);\n                    this.boss.appear();\n                } else {\n                    clearTimeout(this.boss.disappearTimer);\n                    this.boss.disappear();\n                }\n            }\n        }\n    }\n    handleGameResult() {\n        const name = this.playerName;\n        const level = this.currentLevel;\n        const battery = this.batteryNum;\n        const bullet = this.shooter.bulletNum;\n        let boss;\n        if (level !== 10 || this.boss) {\n            boss = \"no\";\n        } else {\n            boss = this.beatBossSeconds;\n        }\n        axios\n            .get(\"https://script.google.com/macros/s/AKfycbxXPc6OojwUB7_7KZemuaWcSZWUczYWyykoeRkCoYoLbFWOXzU/exec\", {\n                params: {\n                    name,\n                    level,\n                    battery,\n                    bullet,\n                    boss\n                }\n            })\n            .then(res => {\n                const data = res.data;\n                rankingNum.innerHTML = `\n        <p>${data.rank}</p>\n        <span>/&nbsp;${data.totalPlayers}</span>\n      `;\n            });\n    }\n    handleGameStars() {\n            axios\n                .get(\"https://script.google.com/macros/s/AKfycbwHefxRQcRXMfAgHyS9rcOo1OonEP-I_hHV3qb-aMW73KnNJvw/exec\")\n                .then(res => {\n                    const data = res.data;\n                    const firstStarData = data.firstData;\n                    const secondStarData = data.secondData;\n                    const thirdStarData = data.thirdData;\n                    let starScoreHTML = \"\";\n\n                    function fillStarScore(name, wave, bat, bullet, boss) {\n                        starScoreHTML = `\n            <div class=\"star__name\">${name}</div>\n            <div class=\"star__scores\">\n              <div class=\"star__score\">\n                <div class=\"star__num\">${wave}</div>\n                <div class=\"star__text\">WAVES</div>\n              </div>\n              <div class=\"star__score\">\n                <div class=\"star__num\">${bat}</div>\n                <div class=\"star__text\">BATTERIES</div>\n              </div>\n              <div class=\"star__score\">\n                <div class=\"star__num\">${bullet}</div>\n                <div class=\"star__text\">BULLETS</div>\n              </div>\n              <div class=\"star__score\">\n                <div class=\"star__num\">${boss}</div>\n                <div class=\"star__text\">BOSS</div>\n              </div>\n            </div>\n          `;\n                    }\n                    fillStarScore(...firstStarData);\n                    starWrapper1.innerHTML = starScoreHTML;\n                    fillStarScore(...secondStarData);\n                    starWrapper2.innerHTML = starScoreHTML;\n                    fillStarScore(...thirdStarData);\n                    starWrapper3.innerHTML = starScoreHTML;\n                });\n        }\n        // 產生道具\n    generateProp() {\n            // 如果已有道具，便停止計時\n            if (this.prop) return;\n            this.propGeneratedTimer = setTimeout(() => {\n                this.propGeneratedInterval -= 1;\n                // 20 秒過後\n                if (this.propGeneratedInterval === 0) {\n                    let propName;\n                    // 如果大於 5 顆心，便排除愛心\n                    if (this.shooter.hearts < 5) {\n                        propName = props[getRandom(0, 4)];\n                    } else {\n                        propName = props[getRandom(1, 4)];\n                    }\n                    this.prop = new Prop({\n                        src: `./img/${propName}.svg`,\n                        axisRotateR: gameHalfDiagonalL,\n                        axisRotateAngle: getRandom(0, 360)\n                    });\n                    // 每 20 (200 * 100) 秒產生一個道具\n                    this.propGeneratedInterval = 200;\n                }\n                this.generateProp();\n            }, 100);\n        }\n        // 倒數遊戲時間\n    countdownTime() {\n            this.countdownTimer = setTimeout(() => {\n                        if (this.countdownSeconds === 0) {\n                            this.currentLevel += 1;\n                            this.setLevel(this.currentLevel);\n                            return;\n                        }\n                        this.countdownSeconds -= 1;\n                        gameTime.textContent = `00:${this.countdownSeconds < 10 ? `0${this.countdownSeconds}` : this.countdownSeconds}”`;\n      this.countdownTime();\n    }, 1000);\n  }\n  countupTime() {\n    this.countupTimer = setTimeout(() => {\n      this.beatBossSeconds += 1;\n      const minutes = Math.floor(this.beatBossSeconds / 60);\n      const trueSeconds = this.beatBossSeconds % 60;\n      const TimeSeconds = trueSeconds < 10 ? `0${trueSeconds}` : trueSeconds;\n      const TimeMinutes = minutes < 10 ? `0${minutes}` : minutes;\n      gameTime.textContent = `${TimeMinutes}:${TimeSeconds}”`;\n      this.countupTime();\n    }, 1000);\n  }\n  // 自動恢復 shooter 生命條\n  recoverShooterHPBar() {\n    this.hpRecoverTimer = setTimeout(() => {\n      if (this.isPause || !this.isStart) {\n        this.recoverShooterHPBar();\n        return;\n      }\n      const nowHPW = shooterHPBar.offsetWidth;\n      if (nowHPW < 216) {\n        const recoverHPBarW = nowHPW + 1;\n        shooterHPBar.style.width = `${recoverHPBarW}px`;\n      }\n      this.recoverShooterHPBar();\n    }, 300);\n  }\n  // 每 3 秒清除一次跑馬燈\n  clearCrawler() {\n    gameCrawler.textContent = \"\";\n    // CONFUSED 為什麼這樣寫不行？（只會觸發兩次）\n    // setTimeout(this.clearCrawler, 3000);\n    this.crawlerClearedTimer = setTimeout(() => {\n      this.clearCrawler();\n    }, 3000);\n  }\n  // 設定敵人出場\n  setEnemy(form, seconds = 0) {\n    setTimeout(() => {\n      switch (form) {\n        case \"circle\": {\n          this.circles.push(\n            new Circle({\n              axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\n              axisRotateAngle: getRandom(0, 360),\n              axisRotateAngleV: -(getRandom(2, 8) / 10),\n              rotate: getRandom(0, 360)\n            })\n          );\n          break;\n        }\n        case \"triangle\": {\n          // axisRotateAngle 與 rotate 必須相同\n          const angle = getRandom(0, 360);\n          this.triangles.push(\n            new Triangle({\n              axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\n              axisRotateAngle: angle,\n              axisRotateAngleV: getRandom(2, 8) / 10,\n              rotate: angle\n            })\n          );\n          break;\n        }\n        case \"polygon\": {\n          const rotateR = getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL / 1.5);\n          const rotateAngle = getRandom(0, 360);\n          const rotate = getRandom(0, 360);\n          this.polygons.push(\n            new Polygon({\n              axisRotateR: {\n                whole: rotateR,\n                big: rotateR,\n                small: rotateR\n              },\n              axisRotateAngle: {\n                whole: rotateAngle,\n                big: rotateAngle,\n                small: rotateAngle\n              },\n              rotate: {\n                whole: rotate,\n                big: rotate,\n                small: rotate\n              },\n              rotateV: getRandom(4, 8) / 10\n            })\n          );\n          break;\n        }\n        default:\n          break;\n      }\n    }, seconds * 1000);\n  }\n  // 初始化關卡\n  initLevel(level, seconds) {\n    gameLevel.textContent = `Wave ${level}`;\n    this.countdownSeconds = seconds;\n    gameTime.textContent = `00:${this.countdownSeconds}”`;\n    this.countdownTime();\n  }\n  // 設定關卡\n  setLevel(level) {\n    switch (level) {\n      case 1:\n        this.initLevel(\"01\", 15);\n        // const rotateNum = 360;\n        // this.boss = new Boss({\n        //   axisRotateR: getRandom(gameH / 3, gameH / 2.5),\n        //   axisRotateAngle: rotateNum,\n        //   rotate: rotateNum - 90,\n        // });\n        // 設定敵人出場\n        this.setEnemy(\"circle\", 2);\n        break;\n      case 2:\n        this.initLevel(\"02\", 20);\n        this.setEnemy(\"triangle\", 2);\n        this.setEnemy(\"polygon\", 10);\n        break;\n      case 3:\n        this.initLevel(\"03\", 20);\n        this.setEnemy(\"polygon\", 2);\n        this.setEnemy(\"circle\", 5);\n        this.setEnemy(\"polygon\", 10);\n        break;\n      case 4:\n        this.initLevel(\"04\", 30);\n        this.setEnemy(\"circle\", 2);\n        this.setEnemy(\"triangle\", 2);\n        this.setEnemy(\"polygon\", 10);\n        this.setEnemy(\"triangle\", 15);\n        this.setEnemy(\"polygon\", 20);\n        break;\n      case 5:\n        this.initLevel(\"05\", 30);\n        this.setEnemy(\"circle\", 2);\n        this.setEnemy(\"circle\", 5);\n        this.setEnemy(\"polygon\", 15);\n        this.setEnemy(\"triangle\", 20);\n        break;\n      case 6:\n        this.initLevel(\"06\", 40);\n        this.setEnemy(\"triangle\", 2);\n        this.setEnemy(\"triangle\", 5);\n        this.setEnemy(\"circle\", 15);\n        this.setEnemy(\"circle\", 30);\n        this.setEnemy(\"polygon\", 30);\n        break;\n      case 7:\n        this.initLevel(\"07\", 60);\n        this.setEnemy(\"circle\", 2);\n        this.setEnemy(\"triangle\", 2);\n        this.setEnemy(\"circle\", 10);\n        this.setEnemy(\"triangle\", 10);\n        this.setEnemy(\"polygon\", 15);\n        this.setEnemy(\"polygon\", 20);\n        this.setEnemy(\"triangle\", 25);\n        this.setEnemy(\"triangle\", 35);\n        this.setEnemy(\"polygon\", 40);\n        this.setEnemy(\"circle\", 45);\n        break;\n      case 8:\n        this.initLevel(\"08\", 60);\n        this.setEnemy(\"circle\", 5);\n        this.setEnemy(\"triangle\", 10);\n        this.setEnemy(\"polygon\", 15);\n        this.setEnemy(\"circle\", 20);\n        this.setEnemy(\"polygon\", 30);\n        this.setEnemy(\"triangle\", 35);\n        this.setEnemy(\"polygon\", 35);\n        this.setEnemy(\"triangle\", 45);\n        this.setEnemy(\"circle\", 50);\n        this.setEnemy(\"polygon\", 50);\n        break;\n      case 9:\n        this.initLevel(\"09\", 40);\n        this.setEnemy(\"circle\", 2);\n        this.setEnemy(\"triangle\", 2);\n        this.setEnemy(\"triangle\", 5);\n        this.setEnemy(\"polygon\", 10);\n        this.setEnemy(\"circle\", 15);\n        this.setEnemy(\"polygon\", 15);\n        this.setEnemy(\"circle\", 25);\n        this.setEnemy(\"triangle\", 30);\n        break;\n      case 10:\n        gameLevel.textContent = \"Wave 10\";\n        const rotateNum = getRandom(0, 360);\n        this.boss = new Boss({\n          axisRotateR: getRandom(gameH / 3, gameH / 2.5),\n          axisRotateAngle: rotateNum,\n          rotate: rotateNum - 90\n        });\n        this.countupTime();\n        break;\n      default:\n        break;\n    }\n    playSound(\"synth\", \"A6\");\n  }\n  checkPlayerName() {\n    // const playerName = document.getElementById('player-name').value;\n    if (playerName.value) {\n      return true;\n    } else {\n      playerName.classList.add(\"warn\");\n      playSound(\"synth\", \"A3\");\n      playSound(\"synth\", \"A2\", \"8n\", 160);\n      return false;\n    }\n  }\n}\n\n// Page Loaded\nfunction handleLoad() {\n  game = new Game();\n  initCanvas();\n  game.init();\n}\n\n// load & resize event\nwindow.addEventListener(\"load\", handleLoad);\nwindow.addEventListener(\"resize\", initCanvas);\n\n// Mouse Events & Recording\nlet mouseMovePos = {};\nlet mouseMoveAngle = 0;\nfunction handleMouseMove(evt) {\n  mouseMovePos.x = evt.x - ww / 2;\n  mouseMovePos.y = evt.y - wh / 2;\n  const angle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\n  mouseMoveAngle = angle < 0 ? angle + 2 * Math.PI : angle;\n}\n\nlet beforeShootTime = new Date();\nfunction handleClick() {\n  if (game.isPause) return;\n  game.shooter.shoot();\n}\n\nfunction handleKeyup(evt) {\n  if (game.isStart) {\n    if (evt.key === \"s\") {\n      game.shooter.shoot();\n    }\n    if (evt.key === \"p\") {\n      game.pauseGame();\n    }\n  } else {\n    if (evt.key === \"Enter\") {\n      if (!game.checkPlayerName()) return;\n      game.startGame();\n    }\n  }\n  if (evt.key === \"m\") {\n    game.isMuted = !game.isMuted;\n    bgm.muted = !bgm.muted;\n    victoryBgm.muted = !victoryBgm.muted;\n  }\n}\n\nfunction handlePlayerName() {\n  playerName.addEventListener(\"focus\", function() {\n    playerName.classList.remove(\"shine\");\n    playerName.classList.remove(\"warn\");\n  });\n\n  playerName.addEventListener(\"focusout\", function() {\n    if (!playerName.value) {\n      playerName.classList.add(\"shine\");\n    }\n  });\n\n  playerName.addEventListener(\"input\", function() {\n    if (playerName.value) {\n      startBtn.classList.add(\"shine\");\n    } else {\n      startBtn.classList.remove(\"shine\");\n    }\n  });\n}","class Polygon {\n  constructor(args) {\n    const def = {\n      axisRotateR: {\n        whole: 0,\n        big: 0,\n        small: 0,\n      },\n      axisRotateAngle: {\n        whole: 0,\n        big: 0,\n        small: 0,\n      },\n      rotate: {\n        whole: 0,\n        big: 0,\n        small: 0,\n      },\n      HP: {\n        whole: 1,\n        big: 1,\n        small: 1,\n      },\n      axisRotateRV: 0,\n      rotateV: 0,\n      color: globalColor.red,\n      // 是否正好要分裂\n      isJustSplite: true,\n      scale: 0,\n      beginAppear: true,\n      isBossGenerate: false,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n\n\n  originPos(form) {\n    return {\n      x: (gameW / 2) + this.axisRotateR[form] * Math.cos(this.axisRotateAngle[form] * degToPi),\n      y: (gameH / 2) + this.axisRotateR[form] * Math.sin(this.axisRotateAngle[form] * degToPi),\n    };\n  }\n\n\n  draw() {\n    if (this.HP.whole) {\n      ctx.save();\n      ctx.translate(this.originPos('whole').x, this.originPos('whole').y);\n      ctx.rotate(this.rotate.whole * degToPi);\n      ctx.scale(this.scale, this.scale);\n      // 主體多邊形\n      ctx.beginPath();\n      ctx.fillStyle = this.color;\n      ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\n      ctx.$triLineTo(23, 70);\n      ctx.$triLineTo(23, 150);\n      ctx.$triLineTo(34, 202);\n      ctx.$triLineTo(22, 255);\n      ctx.$triLineTo(22, 324);\n      ctx.closePath();\n      ctx.fill();\n      // 右淡五邊形\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\n      ctx.moveTo(9.6, -2);\n      ctx.$triLineTo(22, 324);\n      ctx.$triLineTo(21, 8);\n      ctx.$triLineTo(23, 70);\n      ctx.$triLineTo(10, 36);\n      ctx.closePath();\n      ctx.fill();\n      // 下淡四邊形\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\n      ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\n      ctx.$triLineTo(23, 70);\n      ctx.$triLineTo(23, 150);\n      ctx.lineTo(-8.8, 0);\n      ctx.closePath();\n      ctx.fill();\n      // 閃電\n      drawLightning({\n        x: -0.8,\n        y: -16\n      });\n      ctx.restore();\n    } else {\n      // 大分裂四邊形\n      if (this.HP.big) {\n        ctx.save();\n        ctx.translate(this.originPos('big').x, this.originPos('big').y);\n        ctx.rotate(this.rotate.big * degToPi);\n        // 大分裂主體\n        ctx.beginPath();\n        ctx.fillStyle = this.color;\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\n        ctx.$triLineTo(23, 150);\n        ctx.$triLineTo(34, 202);\n        ctx.$triLineTo(22, 255);\n        ctx.closePath();\n        ctx.fill();\n        // 大分裂內下四邊形\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\n        ctx.beginPath();\n        ctx.moveTo(-8.8, 0);\n        ctx.$triLineTo(4.8, 64);\n        ctx.$triLineTo(23, 70);\n        ctx.$triLineTo(23, 150);\n        ctx.closePath();\n        ctx.fill();\n        // 大分裂左閃電\n        drawLightning({\n          x: -12,\n          y: -8\n        }, 0.6);\n        ctx.restore();\n      }\n      // 小分裂四邊形\n      if (this.HP.small) {\n        ctx.save();\n        ctx.translate(this.originPos('small').x, this.originPos('small').y);\n        ctx.rotate(this.rotate.small * degToPi);\n        // 小分裂主體\n        ctx.beginPath();\n        ctx.fillStyle = this.color;\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\n        ctx.$triLineTo(22, 255);\n        ctx.$triLineTo(22, 324);\n        ctx.$triLineTo(21, 8);\n        ctx.closePath();\n        ctx.fill();\n        // 小分裂內下三角形\n        ctx.beginPath();\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\n        ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\n        ctx.$triLineTo(4.8, 64);\n        ctx.$triLineTo(23, 70);\n        ctx.closePath();\n        ctx.fill();\n        // 小分裂內右五邊形\n        ctx.beginPath();\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\n        ctx.moveTo(9.6, -2);\n        ctx.$triLineTo(22, 324);\n        ctx.$triLineTo(21, 8);\n        ctx.$triLineTo(23, 70);\n        ctx.$triLineTo(10, 36);\n        ctx.closePath();\n        ctx.fill();\n        // 小分裂閃電\n        drawLightning({\n          x: 10,\n          y: -8\n        }, 0.5);\n        ctx.restore();\n      }\n    }\n  }\n\n\n  update(idx) {\n    this.beginAppear && this.appear(this.isBossGenerate);\n    this.beginAppear = false;\n    enemyMethods.approach(this);\n    // 如果尚未分裂\n    if (this.HP.whole) {\n      this.rotate.whole = this.rotate.big = this.rotate.small += this.rotateV;\n      // 當多邊形撞上 shooter\n      game.isStart && enemyMethods.hitShooter(game.polygons, idx, 'whole', this.axisRotateR.whole, this.axisRotateAngle.whole);\n    } else {\n      // let rotateDirection;\n      // 如果正好要分裂\n      if (this.isJustSplite) {\n        // const rotateOriginPos = 90 - 70;\n        // const rotateDirection = (((this.rotate.whole % 360) >= rotateOriginPos) && ((this.rotate.whole % 360) < (180 + rotateOriginPos))) ? -1 : 1;\n        const rotateDirection = Math.random() >= 0.5 ? 1 : -1;\n        TweenLite.to(this.axisRotateAngle, 2.4, {\n          big: `+=${getRandom(15, 30) * rotateDirection}`,\n          small: `-=${getRandom(15, 30) * rotateDirection}`,\n          ease: Circ.easeOut,\n        });\n        TweenLite.to(this.axisRotateR, 2.4, {\n          big: `+=${getRandom(50, 150)}`,\n          small: `+=${getRandom(50, 150)}`,\n          ease: Circ.easeOut,\n        });\n        TweenLite.to(this.rotate, 2.4, {\n          big: `+=${getRandom(180, 270)}`,\n          small: `-=${getRandom(180, 270)}`,\n          ease: Circ.easeOut,\n        });\n        // gameCrawler.textContent = 'ENEMY SPLITS';\n        this.isJustSplite = false;\n      }\n      // 當大分裂撞上 shooter\n      if (this.HP.big) {\n        // 重物自轉較慢\n        this.rotate.big += this.rotateV * 1.4;\n        enemyMethods.hitShooter(game.polygons, idx, 'big', this.axisRotateR.big, this.axisRotateAngle.big);\n      }\n      // 當小分裂撞上 shooter\n      if (this.HP.small) {\n        // 輕物自轉較快\n        this.rotate.small -= this.rotateV * 1.6;\n        enemyMethods.hitShooter(game.polygons, idx, 'small', this.axisRotateR.small, this.axisRotateAngle.small);\n      }\n    }\n  }\n\n\n  appear(isBossGenerate) {\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\n    TweenLite.to(this, 0.8, {\n      scale: 1,\n      ease: Back.easeOut.config(1.7),\n    });\n    if (isBossGenerate) {\n      const rotateNum = getRandom(40, 80);\n      const rNum = getRandom(40, 80);\n      TweenLite.to(this.axisRotateAngle, 1.6, {\n        whole: `-=${rotateNum}`,\n        big: `-=${rotateNum}`,\n        small: `-=${rotateNum}`,\n        ease: Power2.easeOut,\n      });\n      TweenLite.to(this.axisRotateR, 1.6, {\n        whole: `+=${rNum}`,\n        big: `+=${rNum}`,\n        small: `+=${rNum}`,\n        ease: Power2.easeOut,\n      });\n    }\n    game.isStart && playSound('synth', 'C4', '4n');\n  }\n}","/* 道具 class */\nclass Prop {\n  constructor(args) {\n    const def = {\n      img: new Image(),\n      src: '',\n      axisRotateR: 0,\n      axisRotateRV: 0,\n      axisRotateAngle: 0,\n      r: 32,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    if (!this.img.src) {\n      // 防止 Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The HTMLImageElement provided is in the 'broken' state.\n      // this.img.width = 44;\n      // this.img.height = 44;\n      this.img.src = this.src;\n    }\n    if (this.img.complete) {\n      ctx.save();\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\n      // setTimeout(() => {\n      ctx.drawImage(this.img, 0, 0);\n      // }, 0);\n      // ctx.drawImage(this.img, 0, 0);\n      ctx.beginPath();\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';\n      ctx.arc(this.img.width / 2, this.img.height / 2, this.r, 0, Math.PI * 2);\n      ctx.stroke();\n      ctx.restore();\n    }\n  }\n  update() {\n    if (!this.axisRotateRV) {\n      const seconds = getRandom(5, 8);\n      this.axisRotateRV = -(gameHalfDiagonalL / (seconds * updateFPS));\n    }\n    this.axisRotateR += this.axisRotateRV;\n    // 當道具撞上 shooter 主體\n    const shooter = game.shooter;\n    // 判斷是否撞上\n    if ((this.axisRotateR + this.r) <= (shooter.r + (shooter.cirSolidLineW / 2))) {\n      // 清掉該道具\n      game.prop = '';\n      const propName = this.src.replace('./img/', '').split('.')[0];\n      shooter.getProp(propName);\n    }\n  }\n}","class Shooter {\n  constructor(args) {\n    const def = {\n      color: globalColor.white,\n      // r: 34 * 0.85,\n      r: 28.9,\n      // shieldR: (34 + 36) * 0.85,\n      shieldR: 60,\n      // cirSolidLineW: 6 * 0.85,\n      cirSolidLineW: 6,\n      // shieldLineW: 4 * 0.85,\n      shieldLineW: 4,\n      rotateAngle: 0,\n      bullets: [],\n      bulletNum: 0,\n      hearts: 3,\n      state: '',\n      isAttacked: false,\n      isProtect: false,\n      beforeShootTime: new Date(),\n    };\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    if (!game.isStart && !game.isEnd) return;\n    ctx.save();\n    // 輪圍\n    ctx.translate(gameW / 2, gameH / 2);\n    ctx.save();\n    ctx.beginPath();\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\n    ctx.shadowBlur = 16;\n    ctx.lineWidth = this.cirSolidLineW;\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\n    if (!this.isAttacked) {\n      ctx.strokeStyle = this.color;\n    } else {\n      ctx.strokeStyle = globalColor.red;\n      this.isAttacked = false;\n    }\n    ctx.stroke();\n    // 輪軸\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.$triLineTo(this.r, 0, this.rotateAngle);\n    ctx.moveTo(0, 0);\n    ctx.$triLineTo(this.r, 120, this.rotateAngle);\n    ctx.moveTo(0, 0);\n    ctx.$triLineTo(this.r, 240, this.rotateAngle);\n    // ctx.lineWidth = 3 * 0.85;\n    ctx.lineWidth = 2.55;\n    ctx.stroke();\n    ctx.restore();\n    // 輪圍外虛線\n    ctx.strokeStyle = this.color;\n    // const outerR = this.r + 22 * 0.85;\n    const outerR = this.r + 20;\n    for (let i = 0; i < 360; i += 1) {\n      const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\n      const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\n      const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\n      const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\n      if (i % 10 < 5) {\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      }\n    }\n    // 護盾\n    ctx.beginPath();\n    ctx.lineWidth = this.shieldLineW;\n    // 如果 shooter 狀態為 shield，護盾變為 180°\n    if (this.state !== 'shield') {\n      ctx.arc(0, 0, this.shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\n    } else {\n      ctx.arc(0, 0, this.shieldR, 90 * degToPi + this.rotateAngle, 270 * degToPi + this.rotateAngle);\n    }\n    if (!this.isProtect) {\n      ctx.strokeStyle = this.color;\n    } else {\n      ctx.strokeStyle = globalColor.blue;\n      this.isProtect = false;\n    }\n    ctx.stroke();\n    // 砲口\n    ctx.beginPath();\n    ctx.save();\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\n    ctx.shadowBlur = 16;\n    ctx.rotate(this.rotateAngle);\n    ctx.translate(this.r + 8, 0);\n    ctx.moveTo(0, 0);\n    // 下方長方形長 13.6、寬（高） 10.2\n    // 上方梯形高 11.8、上邊寬 6.8\n    ctx.lineTo(0, 6.8);\n    ctx.lineTo(10.2, 6.8);\n    ctx.lineTo(22.1, 3.4);\n    ctx.lineTo(22.1, -3.4);\n    ctx.lineTo(10.2, -6.8);\n    ctx.lineTo(0, -6.8);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    ctx.restore();\n    ctx.restore();\n    // 發射子彈\n    this.bullets.forEach((bullet) => {\n      bullet.draw();\n    });\n  }\n  update() {\n    this.rotateAngle = mouseMoveAngle;\n    this.bullets.forEach((bullet, idx) => {\n      bullet.update(idx);\n    });\n  }\n  shoot() {\n    const shootTime = new Date();\n    if (shootTime - beforeShootTime > 400) {\n      let bulletNum;\n      // 如果 shooter 狀態為 double，每次射兩發，兩發之間隔 0.16 秒\n      if (this.state !== 'double') {\n        bulletNum = 1;\n      } else {\n        bulletNum = 2;\n      }\n      for (let i = 0; i < bulletNum; i++) {\n        if (this.state !== 'wave') {\n          setTimeout(() => {\n            this.bulletNum += 1;\n            this.bullets.push(new ShooterBullet({\n              // axisRotateR: 62 * 0.85,\n              axisRotateR: 52.7,\n              rotateAngle: mouseMoveAngle,\n            }));\n            playSound('membrane', 'D3');\n          }, 160 * i);\n        } else {\n          setTimeout(() => {\n            this.bulletNum += 1;\n            this.bullets.push(new ShooterBullet({\n              waveLength: getRandom(40, 80),\n              waveFreq: getRandom(2, 4) / 10,\n              waveAmp: getRandom(4, 8),\n              waveFlow: getRandom(4, 8),\n              // axisRotateR: 70 * 0.85,\n              axisRotateR: 59.5,\n              rotateAngle: mouseMoveAngle,\n            }));\n            playSound('mono', 'F2', '4n', 0, -10);\n          }, 160 * i);\n        }\n      }\n      beforeShootTime = shootTime;\n    }\n  }\n  getProp(propName) {\n    // 持續秒數\n    let lastTime;\n    switch (propName) {\n      case 'heart':\n        this.recoverHeart();\n        lastTime = 0;\n        gameCrawler.textContent = 'GAIN LIFE💕';\n        break;\n      case 'crackdown':\n        this.drawCrackdownEffect();\n        lastTime = 0;\n        gameCrawler.textContent = 'BOOM💥';\n        break;\n      case 'shield':\n        lastTime = 25000;\n        gameCrawler.textContent = 'EXTEND SHIELD💪';\n        break;\n      case 'double':\n        lastTime = 20000;\n        gameCrawler.textContent = 'DOUBLE SHOOT✌️';\n        break;\n      case 'wave':\n        lastTime = 15000;\n        gameCrawler.textContent = 'WAVE BULLET🌊';\n        break;\n      default:\n        lastTime = 0;\n    }\n    // 將道具設為 shooter 的狀態\n    this.state = propName;\n    // 時間到後，移除道具效果\n    const countLastTime = () => {\n      setTimeout(() => {\n        if (!game.isStart) return;\n        if (game.isPause) {\n          countLastTime();\n        } else {\n          lastTime -= 1000;\n          if (lastTime > 0) {\n            countLastTime();\n          } else {\n            this.state = '';\n            // 重新道具計時\n            game.generateProp();\n          }\n        }\n      }, 1000);\n    }\n    // 顯示道具效果持續時間\n    this.displayPropInfo(propName, lastTime);\n    if (propName !== 'crackdown') {\n      playSound('synth', 'E5');\n      playSound('synth', 'G5', '8n', 160);\n    }\n    countLastTime();\n  }\n  // 繪製清場效果\n  drawCrackdownEffect() {\n    let crackdownTime = 1;\n    const boss = game.boss;\n    const effect = () => {\n      if (!game.isPause) {\n        crackdownTime += 1;\n      }\n      ctx.save();\n      ctx.beginPath();\n      ctx.shadowColor = 'rgba(255, 255, 255, 0.72)';\n      ctx.shadowBlur = 2;\n      // 透明度從 1 到 0\n      ctx.strokeStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 98})`;\n      ctx.fillStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 490})`;\n      ctx.lineWidth = 5;\n      /**\n       * baseLog() 從 0 到 3\n       * 所以 (((crackdownTime - 2) / 98) * 26) + 1 為從 1 到 27\n       * 清場半徑因此為從 0 到 528\n       */\n      const effectR = 176 * baseLog(3, (((crackdownTime - 2) / 98) * 26) + 1);\n      ctx.arc(gameW / 2, gameH / 2, effectR, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.stroke();\n      ctx.restore();\n      // 清除敵人\n      game.circles.forEach((circle, idx) => {\n        if (effectR > circle.axisRotateR) {\n          enemyMethods.dieEffect(circle.r, originPos(circle.axisRotateR, circle.axisRotateAngle).x, originPos(circle.axisRotateR, circle.axisRotateAngle).y, '245, 175, 95');\n          game.circles.splice(idx, 1);\n        }\n      });\n      game.triangles.forEach((triangle, idx) => {\n        if (effectR > triangle.axisRotateR) {\n          enemyMethods.dieEffect(triangle.r, originPos(triangle.axisRotateR, triangle.axisRotateAngle).x, originPos(triangle.axisRotateR, triangle.axisRotateAngle).y, '54, 118, 187');\n          game.triangles.splice(idx, 1);\n        }\n      });\n      game.polygons.forEach((polygon, idx) => {\n        if (effectR > polygon.axisRotateR.whole) {\n          if (polygon.HP.whole) {\n            const polygonWholeR = (34 + 21) / 2;\n            enemyMethods.dieEffect(polygonWholeR, polygon.originPos('whole').x, polygon.originPos('whole').y, '231, 70, 93');\n          } else {\n            if (polygon.HP.big) {\n              const polygonBigR = (34 + 22) / 2;\n              enemyMethods.dieEffect(polygonBigR, polygon.originPos('big').x, polygon.originPos('big').y, '231, 70, 93');\n              game.polygons.splice(idx, 1);\n            }\n            if (polygon.HP.small) {\n              const polygonSmallR = (23 + 21) / 2;\n              enemyMethods.dieEffect(polygonSmallR, polygon.originPos('small').x, polygon.originPos('small').y, '231, 70, 93');\n              game.polygons.splice(idx, 1);\n            }\n          }\n          game.polygons.splice(idx, 1);\n        }\n      });\n      game.subTris.forEach((subTriangle, idx) => {\n        if (effectR > subTriangle.axisRotateR) {\n          game.subTris.splice(idx, 1);\n        }\n      });\n      // 清除 boss\n      if (game.boss) {\n        if (effectR > boss.axisRotateR && boss.HP === 0) {\n          enemyMethods.bossDieResult();\n        }\n      }\n      if (crackdownTime < 100) {\n        requestAnimationFrame(effect);\n      }\n    }\n    requestAnimationFrame(effect);\n    if (boss) {\n      boss.HP -= 1;\n    }\n    // playSound('duo', 'F4', '2n');\n    playSound('synth', 'C6', '2n');\n    // playSound('synth', 'G2', '8n', 0, 20);\n    // playSound('duo', 'F2', '2n', 0, 15);\n    // playSound('duo', 'E2', '2n', 0, 10);\n    // playSound('duo', 'D2', '8n', 1000, 10);\n  }\n  // 恢復一個愛心命\n  recoverHeart() {\n    const heart = document.createElement('DIV');\n    heart.classList.add('panel__game-heart');\n    heartWrapper.appendChild(heart);\n    this.hearts += 1;\n  }\n  displayPropInfo(propName, lastTime) {\n    if (propName === 'crackdown' || propName === 'heart') return;\n    prop.classList.remove('op0');\n    propImg.src = `./img/${propName}--panel.svg`;\n    lastTime /= 1000;  \n    propLastTime.textContent = lastTime;\n    const countLastTime = () => {\n      // const propInfoTimer = setTimeout(() => {\n      setTimeout(() => {\n        if (!game.isStart) return;\n        if (game.isPause) {\n          countLastTime();\n          return;\n        }\n        // 遊戲結束時，清除計時器\n        // if (!game.isStart) {\n        //   clearTimeout(propInfoTimer);\n        //   return;\n        // }\n        lastTime -= 1;\n        propLastTime.textContent = lastTime >= 10 ? lastTime : `0${lastTime}`;\n        if (lastTime) {\n          countLastTime();\n        } else {\n          prop.classList.add('op0');\n          // clearTimeout(propInfoTimer);\n        }\n      }, 1000);\n    }\n    countLastTime();\n  }\n}\n\n\n\nclass ShooterBullet {\n  constructor(args) {\n    const def = {\n      // bodyLen: 15 * 0.85,\n      bodyLen: 12.75,\n      axisRotateR: 0,\n      color: globalColor.white,\n      v: 10,\n      rotateAngle: 0,\n      waveLength: 40,\n      waveFreq: 0.2,\n      waveAmp: 4,\n      waveFlow: 4,\n    };\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    ctx.save();\n    ctx.translate(gameW / 2, gameH / 2);\n    ctx.rotate(this.rotateAngle);\n    // 如果 shooter 狀態非 wave\n    if (game.shooter.state !== 'wave') {\n      // 殘影\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n      // ctx.arc(-7 * 0.85 + this.axisRotateR, 0, 3 * 0.85, 0, Math.PI * 2);\n      ctx.arc(-5.95 + this.axisRotateR, 0, 2.15, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\n      // ctx.arc(-12 * 0.85 + this.axisRotateR, 0, 2 * 0.85, 0, Math.PI * 2);\n      ctx.arc(-10.2 + this.axisRotateR, 0, 1.7, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\n      // ctx.arc(-15 * 0.85 + this.axisRotateR, 0, 1 * 0.85, 0, Math.PI * 2);\n      ctx.arc(-12.75 + this.axisRotateR, 0, 0.85, 0, Math.PI * 2);\n      ctx.fill();\n      // 園底\n      ctx.beginPath();\n      ctx.fillStyle = this.color;\n      // ctx.arc(0 + this.axisRotateR, 0, 4 * 0.85, 0, Math.PI * 2);\n      ctx.arc(0 + this.axisRotateR, 0, 3.4, 0, Math.PI * 2);\n      ctx.fill();\n      // 尖頭\n      ctx.beginPath();\n      // ctx.moveTo(3 * 0.85 + this.axisRotateR, 3 * 0.85);\n      ctx.moveTo(2.55 + this.axisRotateR, 2.55);\n      ctx.lineTo(this.bodyLen + this.axisRotateR, 0);\n      // ctx.lineTo(3 * 0.85 + this.axisRotateR, -3 * 0.85);\n      ctx.lineTo(2.55 + this.axisRotateR, -2.55);\n      ctx.closePath();\n      ctx.fill();\n    } else {\n      drawWaveBullet(this, 'axisRotateR', 1.6, 'rgba(255, 255, 255, 0.72)');\n    }\n    ctx.restore();\n  }\n  update(bulletIdx) {\n    // 移動子彈\n    this.axisRotateR += this.v;\n    let anglePanFn;\n    let shotRRangeFn;\n    // 判斷子彈為哪一類型\n    // 一般類型\n    if (game.shooter.state !== 'wave') {\n      const bulletMoveLen = this.axisRotateR + this.bodyLen;\n      // 判斷子彈有無射中圓形\n      game.circles.forEach((circle, cirIdx) => {\n        anglePanFn = () => {\n          return Math.asin(circle.r / circle.axisRotateR);\n        }\n        shotRRangeFn = () => {\n          return (bulletMoveLen >= (circle.axisRotateR - (circle.r / 2))) && (bulletMoveLen <= (circle.axisRotateR + (circle.r / 2)));\n        }\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95');\n      });\n      // 判斷子彈有無射中三角形\n      game.triangles.forEach((triangle, triIdx) => {\n        anglePanFn = () => {\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\n          return Math.atan2(lengthY, lengthX);\n        }\n        shotRRangeFn = () => {\n          return (bulletMoveLen >= triangle.axisRotateR) && (bulletMoveLen <= (triangle.axisRotateR + (triangle.r / 2)));\n        }\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187');\n      });\n      // 判斷子彈有無射中多邊形\n      game.polygons.forEach((polygon, polyIdx) => {\n        // 當多邊形未分裂\n        if (polygon.HP.whole) {\n          shotRRangeFn = () => {\n            const sideA = polygon.axisRotateR.whole;\n            return (bulletMoveLen >= sideA) && (bulletMoveLen <= (sideA + 9));\n          }\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn);\n        } else {\n          // 當多邊形分裂\n          // 大分裂\n          if (polygon.HP.big) {\n            shotRRangeFn = () => {\n              const sideA = polygon.axisRotateR.big;\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\n            }\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn);\n          }\n          // 小分裂\n          if (polygon.HP.small) {\n            shotRRangeFn = () => {\n              const sideA = polygon.axisRotateR.small;\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\n            }\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn);\n          }\n        }\n      });\n      // 判斷子彈有無射中 boss\n      const boss = game.boss;\n      if (boss) {\n        anglePanFn = () => {\n          return Math.asin(18 / (boss.axisRotateR + 6));\n        }\n        shotRRangeFn = () => {\n          return (bulletMoveLen >= (boss.axisRotateR + 9 + 8)) && (bulletMoveLen <= (boss.axisRotateR + 28));\n        }\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'ordinary', true);\n      }\n    } else {\n      // 波狀類型\n      // 有無射中圓形\n      game.circles.forEach((circle, cirIdx) => {\n        anglePanFn = () => {\n          return Math.asin(circle.r / circle.axisRotateR);\n        }\n        shotRRangeFn = () => {\n          return (this.axisRotateR >= (circle.axisRotateR - (circle.r / 2))) && (this.axisRotateR <= (circle.axisRotateR + (circle.r / 2)));\n        }\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95', 'wave');\n      });\n      // 有無射中三角形\n      game.triangles.forEach((triangle, triIdx) => {\n        anglePanFn = () => {\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\n          return Math.atan2(lengthY, lengthX);\n        }\n        shotRRangeFn = () => {\n          return (this.axisRotateR >= triangle.axisRotateR) && (this.axisRotateR <= (triangle.axisRotateR + (triangle.r / 2)));\n        }\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187', 'wave');\n      });\n      // 有無射中多邊形\n      game.polygons.forEach((polygon, polyIdx) => {\n        // 當多邊形尚未分裂\n        if (polygon.HP.whole) {\n          shotRRangeFn = () => {\n            const sideA = polygon.axisRotateR.whole;\n            return (this.axisRotateR >= sideA) && (this.axisRotateR <= (sideA + 9));\n          }\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn, 'wave');\n        } else {\n          // 當多邊形已經分裂\n          // 大分裂\n          if (polygon.HP.big) {\n            shotRRangeFn = () => {\n              const sideA = polygon.axisRotateR.big;\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\n            }\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn, 'wave');\n          }\n          // 小分裂\n          if (polygon.HP.small) {\n            shotRRangeFn = () => {\n              const sideA = polygon.axisRotateR.small;\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\n            }\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn, 'wave');\n          }\n          // 如果大小分裂都已被擊斃，移除此多邊形\n          if (polygon.HP.big === 0 && polygon.HP.small === 0) {\n            game.polygons.splice(polyIdx, 1);\n            // 電池加一\n            game.batteryNum += 1;\n            batteryNum.textContent = game.batteryNum;\n          }\n        }\n      });\n      // 判斷子彈有無射中 boss\n      const boss = game.boss;\n      if (boss) {\n        anglePanFn = () => {\n          return Math.asin(18 / (boss.axisRotateR + 6));\n        }\n        shotRRangeFn = () => {\n          return (this.axisRotateR >= (boss.axisRotateR + 9 + 8)) && (this.axisRotateR <= (boss.axisRotateR + 28));\n        }\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'wave', true);\n      }\n    }\n    // 當子彈超出邊界\n    this.beyondBoundary(bulletIdx);\n  }\n  // 攻擊敵人（圓形、三角形）\n  // FIXME 當敵人太靠近會打不到\n  attackEnemy(enemy, enemyIdx, enemies, bulletIdx, anglePanFn, shotRRangeFn, colorRGB, type = 'ordinary', isBoss = false) {\n    /**\n     * 射中角度範圍\n     * 圓形：取得兩個外切線所構成角度的一半\n     * 三角形：取得射中角度範圍的一半\n     */\n    const enemyAnglePan = anglePanFn();\n    const enemyAngleMinus = (enemy.axisRotateAngle % 360) * degToPi - enemyAnglePan;\n    const enemyAngleAdd = (enemy.axisRotateAngle % 360) * degToPi + enemyAnglePan;\n    const shotAngleRange = this.judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type);\n    // 射中距離範圍\n    const shotRRange = shotRRangeFn();\n\n    if (!gameCrawler.textContent) {\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE🔥' : 'BANG👊';\n    }\n    // 判斷子彈有無射中敵人\n    if (shotAngleRange && shotRRange) {\n      // 移除子彈\n      game.shooter.bullets.splice(bulletIdx, 1);\n      // 扣敵人 1 生命值\n      enemy.HP -= 1;\n      if (type === 'ordinary') {\n        playSound('membrane', 'D2');\n      } else {\n        playSound('mono', 'C2', '8n', 0, -10);\n      }\n      // 若敵人生命值為 0\n      if (enemy.HP === 0) {\n        if (isBoss) {\n          // 移除 boss\n          enemyMethods.bossDieResult();\n          return;\n        } else {\n          // 移除敵人\n          enemies.splice(enemyIdx, 1);\n          // 移除效果\n          enemyMethods.dieEffect(enemy.r, originPos(enemy.axisRotateR, enemy.axisRotateAngle).x, originPos(enemy.axisRotateR, enemy.axisRotateAngle).y, colorRGB);\n          // 電池加一\n          game.batteryNum += 1;\n          batteryNum.textContent = game.batteryNum;\n        }\n      }\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE😤\" : 'HIT👍';\n    }\n  }\n  // 攻擊多邊形\n  attackPolygon(polygon, polyIdx, form, sideB1Len, sideB2Len, angleAB1, angleAB2, rotateAngleJudge, bulletIdx, shotRRangeFn, type = 'ordinary') {\n    const polyAxisRotateAngle = polygon.axisRotateAngle[form];\n    const polyRotate = polygon.rotate[form];\n    // 取得兩側射中最大角度\n    const sideA = polygon.axisRotateR[form];\n    const sideB1 = sideB1Len;\n    const sideB2 = sideB2Len;\n    /**\n     * 兩側點愈靠近軸心，夾角便愈大\n     *   whole: 8°, 202°\n     *   big: 70°, 202°\n     *   small: 70°, 255°\n\n     * 相同軸半徑下，當多邊形呈某一角度，兩側點離軸心（幾乎）最近，angleB 相同\n     *   whole: axisRotateAngle 180°, rotate 75°\n     *     270 - 202 = 68\n     *     90 - 8 = 82\n     *     (68 + 82) / 2 = 75\n     * \n     *   big: axisRotateAngle 0°, rotate 44°\n     *     270 - 202 = 68\n     *     90 - 70 = 20\n     *     (68 + 20) / 2 = 44\n     * \n     *   small: axisRotateAngle 0°, rotate 17.5°\n     *     270 - 255 = 15\n     *     90 - 70 = 20\n     *     (15 + 20) / 2 = 17.5\n     */\n    const sideC1 = cosineFormula(sideA, sideB1, angleAB1);\n    const sideC2 = cosineFormula(sideA, sideB2, angleAB2);\n    // 當多邊形的 axisRotateAngle、rotate 不同，要加上與減去的角度也不一樣\n    const bottomJudge = (polyAxisRotateAngle <= 180) && ((polyRotate % 360) < rotateAngleJudge || (polyRotate % 360) >= (rotateAngleJudge + 180));\n    const topJudge = (polyAxisRotateAngle > 180) && ((polyRotate % 360) >= rotateAngleJudge || (polyRotate % 360) < (rotateAngleJudge + 180));\n    let angleB1;\n    let angleB2;\n\n    if (!gameCrawler.textContent) {\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE🔥' : 'BANG👊';\n    }\n    if (bottomJudge || topJudge) {\n      angleB1 = getAngleB(sideA, sideB2, sideC2);\n      angleB2 = getAngleB(sideA, sideB1, sideC1);\n    } else {\n      angleB1 = getAngleB(sideA, sideB1, sideC1);\n      angleB2 = getAngleB(sideA, sideB2, sideC2);\n    }\n    /**\n     * 射中角度範圍\n     * 多邊形雖不會繞軸旋轉，axisRotateAngle 固定，但分裂時可能會超過 360°，故 % 360\n     */\n    const polyAngleMinus = (polyAxisRotateAngle % 360) * degToPi - angleB1;\n    const polyAngleAdd = (polyAxisRotateAngle % 360) * degToPi + angleB2;\n    const shotAngleRange = this.judgeShotAngleRange(polyAngleMinus, polyAngleAdd, type);\n    // 射中距離範圍\n    const shotRRange = shotRRangeFn();\n    // 判斷子彈有無射中多邊形\n    if (shotAngleRange && shotRRange) {\n      // 移除子彈\n      game.shooter.bullets.splice(bulletIdx, 1);\n      // 扣 1 生命值\n      polygon.HP[form] -= 1;\n      if (form === 'whole') {\n        playSound('synth', 'D6', '16n');\n      }\n      // 若大或小分裂生命值為 0\n      if (polygon.HP.big === 0 || polygon.HP.small === 0) {\n        // 移除效果\n        const polygonR = form === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\n        enemyMethods.dieEffect(polygonR, polygon.originPos(form).x, polygon.originPos(form).y, '231, 70, 93');\n      }\n      // 如果大小分裂都被擊斃了，那就移除此多邊形\n      if (polygon.HP.big === 0 && polygon.HP.small === 0) {\n        game.polygons.splice(polyIdx, 1);\n        // 電池加一\n        game.batteryNum += 1;\n        batteryNum.textContent = game.batteryNum;\n      }\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE😤!\" : 'HIT👍';\n      if (type === 'ordinary') {\n        playSound('membrane', 'D2');\n      } else {\n        playSound('mono', 'C2', '8n', 0, -10);\n      }\n    }\n  }\n  // 判斷射中角度範圍\n  judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type) {\n    let shooterRotateAngle;\n    // 當敵人 axisRotateAngle 在 360° 附近，且 shooter 槍口朝下（0° 下方）\n    if (enemyAngleAdd > Math.PI * 2 && this.rotateAngle < Math.PI) {\n      shooterRotateAngle = this.rotateAngle + Math.PI * 2;\n    } else if (\n      // 當敵人 axisRotateAngle 皆小於 0\n      (enemyAngleMinus < 0 && enemyAngleAdd < 0) || \n      // 當敵人 axisRotateAngle 在 0° 附近，且 shooter 槍口朝上（0° 上方）\n      (enemyAngleMinus < 0 && enemyAngleAdd > 0 && this.rotateAngle > Math.PI)) {\n      shooterRotateAngle = this.rotateAngle - Math.PI * 2;\n    } else {\n      shooterRotateAngle = this.rotateAngle;\n    }\n    // 判斷子彈為哪一類型\n    // 一般子彈\n    if (type !== 'wave') {\n      return shooterRotateAngle >= enemyAngleMinus && shooterRotateAngle <= enemyAngleAdd;\n    } else {\n      // 波狀子彈\n      const shooterAnglePan = Math.atan2(this.waveLength, this.axisRotateR);\n      const shooterAngleMinus = shooterRotateAngle - shooterAnglePan;\n      const shooterAngleAdd = shooterRotateAngle + shooterAnglePan;\n      return (enemyAngleMinus <= shooterAngleAdd) && (enemyAngleAdd >= shooterAngleMinus);\n    }\n  }\n  // 當子彈超出邊界\n  beyondBoundary(bulletIdx) {\n    /**\n     * 856 / 2 = 428\n     * 624 / 2 = 312\n     * Math.sqrt(428 * 428 + 312 * 312) = 529.6\n     */\n    if (this.axisRotateR >= 530) {\n      game.shooter.bullets.splice(bulletIdx, 1);\n    }\n  }\n}","class Triangle {\n  constructor(args) {\n    const def = {\n      axisRotateR: 0,\n      axisRotateAngle: 0,\n      r: 26,\n      rotate: 0,\n      scale: 0,\n      axisRotateRV: 0,\n      axisRotateAngleV: 0,\n      color: globalColor.blue,\n      bullets: [],\n      beforeRotateAxisAngleTime: new Date(),\n      beforeShootTime: new Date(),\n      HP: 4,\n      isGeneratedSub: false,\n      shootTimer: null,\n      beginAppear: true,\n      isBossGenerate: false,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n\n\n  \n  draw() {\n    const triOuterBigR = this.r + 4;\n    const triInnerBigR = this.r - 16;\n    const triInnerSmallR = this.r - 22;\n    ctx.save();\n    // 淡三角\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\n    ctx.scale(this.scale, this.scale);\n    ctx.rotate(this.rotate * degToPi);\n    ctx.save();\n    ctx.translate(4, 0);\n    ctx.beginPath();\n    ctx.moveTo(triOuterBigR * Math.cos(60 * degToPi), triOuterBigR * Math.sin(60 * degToPi));\n    ctx.$triLineTo(triOuterBigR, 180);\n    ctx.$triLineTo(triOuterBigR, 300);\n    ctx.closePath();\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\n    ctx.fill();\n    ctx.restore();\n    // 主體三角\n    ctx.beginPath();\n    ctx.moveTo(this.r * Math.cos(60 * degToPi), this.r * Math.sin(60 * degToPi));\n    ctx.$triLineTo(this.r, 180);\n    ctx.$triLineTo(this.r, 300);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    // 大白三角\n    ctx.translate(0, -2.8);\n    ctx.fillStyle = globalColor.white;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.$triLineTo(triInnerBigR, 90);\n    ctx.$triLineTo(triInnerBigR, 150);\n    ctx.closePath();\n    ctx.fill();\n    // 小白三角\n    ctx.translate(8 * Math.cos(-40 * degToPi), 8 * Math.sin(-40 * degToPi))\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.$triLineTo(triInnerSmallR, 90);\n    ctx.$triLineTo(triInnerSmallR, 150);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n    // 繪製三角子彈\n    this.bullets.forEach((bullet) => {\n      bullet.draw();\n    });\n  }\n\n\n\n  update(idx) {\n    this.beginAppear && this.appear(this.isBossGenerate);\n    this.beginAppear = false;\n    game.isStart && enemyMethods.approach(this);\n    // 更新三角子彈\n    this.bullets.forEach((bullet, idx, arr) => {\n      bullet.update(idx, arr);\n    });\n    // 每 4-8 秒，三角移動 + 自身旋轉\n    const rotateAxisAngleTime = new Date();\n    let randomRotateAngle;\n    if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > getRandom(4000, 8000)) {\n      // 旋轉時不發射子彈\n      if (this.shootTimer) {\n        clearTimeout(this.shootTimer);\n      }\n      randomRotateAngle = (Math.random() >= 0.25 ? 1 : -1) * getRandom(45, 75);\n      // 以 0.8 秒移動\n      TweenLite.to(this, 0.8, {\n        axisRotateAngle: `+=${randomRotateAngle}`,\n        ease: Power0.easeNone,\n      });\n      // 以 1.2 秒自身旋轉\n      TweenLite.to(this, 1.2, {\n        rotate: `+=${randomRotateAngle + 360}`,\n        ease: Power2.easeInOut,\n        onComplete: () => {\n          // 移動完後發射子彈\n          // 當遊戲尚未開始、暫停，或此三角形已死掉，便不發射子彈\n          if (!game.isStart || game.isPause || this.HP === 0) return;\n          this.shoot();\n          // 發射一顆子彈後，每 2.4-7.2 秒發射第二發子彈\n          this.shootTimer = setTimeout(() => {\n            if (!game.isStart || this.HP === 0) return;\n            this.shoot();\n          }, getRandom(2400, 7200));\n        }\n      });\n      this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\n    }\n    // 當生命值剩 2，派副三角形攻擊\n    if (this.HP === 2 && !this.isGeneratedSub) {\n      for (let i = 1; i <= 2; i += 1) {\n        game.subTris.push(new TriSub({\n          axisRotateR: this.axisRotateR,\n          axisRotateAngle: this.axisRotateAngle,\n          rotate: this.rotate,\n          order: i,\n        }));\n      }\n      gameCrawler.textContent = 'COUNTERATTACK🤛';\n      this.isGeneratedSub = true;\n      playSound('synth', 'C6', '16n');\n    }\n    // 當三角形撞上 shooter\n    enemyMethods.hitShooter(game.triangles, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\n  }\n\n\n\n  shoot() {\n    this.bullets.push(new TriBullet({\n      p: {\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\n      },\n      axisRotateR: this.axisRotateR,\n      rotateAngle: this.rotate,\n    }));\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK🤕' : 'ATTACK⚡️';\n    playSound('membrane', 'G5');\n  }\n\n\n\n  appear(isBossGenerate) {\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\n    TweenLite.to(this, 0.8, {\n      scale: 1,\n      ease: Back.easeOut.config(1.7),\n    });\n    let rotateNum = 0;\n    if (isBossGenerate) {\n      rotateNum = getRandom(40, 80);\n      const rNum = getRandom(40, 80);\n      TweenLite.to(this, 1.6, {\n        axisRotateAngle: `+=${rotateNum}`,\n        axisRotateR: `+=${rNum}`,\n        ease: Power2.easeOut,\n      });\n    }\n    TweenLite.to(this, 1.6, {\n      rotate: `+=${rotateNum + 360}`,\n      ease: Back.easeOut.config(1.7),\n    });\n    game.isStart && playSound('synth', 'B4', '4n');\n  }\n}\n\n\n\nclass TriSub {\n  constructor(args) {\n    const def = {\n      axisRotateR: 0,\n      axisRotateAngle: 0,\n      // r: 26 * 0.4,\n      r: 10.4,\n      rotate: 0,\n      rotateV: 4,\n      color: globalColor.blue,\n      HP: 2,\n      isReproduceMoving: false,\n      order: 0,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    const triOuterBigR = this.r + 1.6;\n    const triInnerBigR = this.r - 6.4;\n    const triInnerSmallR = this.r - 8.8;\n    ctx.save();\n    // 淡三角\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\n    // ctx.scale(0.4, 0.4);\n    ctx.rotate(this.rotate * degToPi);\n    ctx.save();\n    ctx.translate(0.8, -Math.sqrt(1.92));\n    ctx.beginPath();\n    ctx.moveTo(triOuterBigR * Math.cos(0), triOuterBigR * Math.sin(0));\n    ctx.lineTo(triOuterBigR * Math.cos(120 * degToPi), triOuterBigR * Math.sin(120 * degToPi));\n    ctx.lineTo(triOuterBigR * Math.cos(240 * degToPi), triOuterBigR * Math.sin(240 * degToPi));\n    ctx.closePath();\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\n    ctx.fill();\n    ctx.restore();\n    // 主體三角\n    ctx.beginPath();\n    ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\n    ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\n    ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    // 大白三角\n    ctx.translate(-1.28, -0.64);\n    ctx.fillStyle = globalColor.white;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(triInnerBigR * Math.cos(30 * degToPi), triInnerBigR * Math.sin(30 * degToPi));\n    ctx.lineTo(triInnerBigR * Math.cos(90 * degToPi), triInnerBigR * Math.sin(90 * degToPi));\n    ctx.closePath();\n    ctx.fill();\n    // 小白三角\n    ctx.translate(0, -3.52);\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(triInnerSmallR * Math.cos(30 * degToPi), triInnerSmallR * Math.sin(30 * degToPi));\n    ctx.lineTo(triInnerSmallR * Math.cos(90 * degToPi), triInnerSmallR * Math.sin(90 * degToPi));\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n  update(idx) {\n    this.rotate += this.rotateV;\n    if (!this.isReproduceMoving) {\n      TweenLite.to(this, 0.8, {\n        axisRotateAngle: `${this.order === 1 ? '+=' : '-='}10`,\n        ease: Power2.easeOut,\n        onComplete: () => {\n          TweenLite.to(this, 1.6, {\n            axisRotateR: 0,\n            ease: Power1.easeIn,\n          });\n        }\n      });\n      this.isReproduceMoving = true;\n    }\n    // 當小三角形撞上 shooter\n    enemyMethods.hitShooter(game.subTris, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\n  }\n}\n\n\n\nclass TriBullet {\n  constructor(args) {\n    const def = {\n      p: {\n        x: 0,\n        y: 0,\n      },\n      moveX: 0,\n      moveXV: -4.5,\n      rotateAngle: 0,\n      color: globalColor.blue,\n    }\n    Object.assign(def, args);\n    Object.assign(this, def);\n  }\n  draw() {\n    ctx.save();\n    ctx.translate(this.p.x, this.p.y);\n    ctx.rotate(this.rotateAngle * degToPi);\n    ctx.translate(this.moveX, 0);\n    // 主體三角子彈\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.moveTo(-16, 0);\n    ctx.$triLineTo(38, 174);\n    ctx.$triLineTo(16.8, 200);\n    ctx.closePath();\n    ctx.fill();\n    // 淡三角子彈\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\n    ctx.beginPath();\n    ctx.moveTo(-16.4, 0);\n    ctx.$triLineTo(38, 174);\n    ctx.$triLineTo(15.6, 168);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n  update(idx, arr) {\n    // 三角子彈移動\n    this.moveX += this.moveXV;\n    // 子彈擊中 shooter\n    enemyMethods.attackShooter(this, idx, arr, 37.8);\n    // 當子彈超出邊界\n    this.beyondBoundary(idx, arr);\n  }\n  // 當子彈超出邊界\n  beyondBoundary(idx, arr) {\n    // Math.sqrt(856 * 856 + 624 * 624) = 1059.3\n    if (this.moveX <= -1060) {\n      arr.splice(idx, 1);\n    }\n  }\n}","ctx.$triLineTo = function (r, angle, angleAdd = 0) {\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\n}\n\n// 繪製波狀子彈\nfunction drawWaveBullet(bullet, originPos, lineWidth, shadowColor) {\n  ctx.strokeStyle = bullet.color;\n  ctx.lineWidth = lineWidth;\n  ctx.shadowColor = shadowColor;\n  ctx.shadowBlur = 2;\n  // 正半波\n  ctx.beginPath();\n  for (let i = 0; i < bullet.waveLength; i += 1) {\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), i);\n  }\n  ctx.stroke();\n  // 負半波\n  ctx.beginPath();\n  for (let i = 0; i < bullet.waveLength; i += 1) {\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), -i);\n  }\n  ctx.stroke();\n}\n\n// 繪製電池\n// function drawBattery(p) {\n//   ctx.save();\n//     ctx.translate(p.x, p.y);\n//     ctx.fillStyle = globalColor.orange;\n//     // 瓶身\n//     ctx.beginPath();\n//     ctx.moveTo(0, 0);\n//     ctx.lineTo(-24, 0);\n//     ctx.lineTo(-24, 42);\n//     ctx.lineTo(0, 42);\n//     ctx.closePath();\n//     ctx.fill();\n//     // 瓶底\n//     ctx.save();\n//       ctx.translate(0, 44);\n//       ctx.beginPath();\n//       ctx.moveTo(0, 0);\n//       ctx.lineTo(-24, 0);\n//       ctx.lineTo(-24, 3);\n//       ctx.lineTo(0, 3);\n//       ctx.closePath();\n//       ctx.fill();\n//     ctx.restore();\n//     // 瓶蓋\n//     ctx.fillStyle = globalColor.white;\n//     ctx.save();\n//       ctx.translate(-6.75, 0);\n//       ctx.beginPath();\n//       ctx.moveTo(0, 0);\n//       ctx.lineTo(0, -3);\n//       ctx.lineTo(-10.5, -3);\n//       ctx.lineTo(-10.5, -0);\n//       ctx.closePath();\n//       ctx.fill();\n//     ctx.restore();\n//     // 閃電\n//     drawLightning({ x: -11, y: 9 });\n//   ctx.restore();\n// }\n\n\n\n// 繪製閃電\nfunction drawLightning(translate = { x: 0, y: 0 }, scale = 1) {\n  ctx.fillStyle = globalColor.white;\n  ctx.translate(translate.x, translate.y);\n  ctx.beginPath();\n  ctx.moveTo(0, 0);\n  ctx.rotate(18 * degToPi);\n  ctx.lineTo(0, 10 * scale);\n  ctx.translate(0, 10 * scale);\n  ctx.rotate(-18 * degToPi);\n\n  ctx.lineTo(10 * scale, 0);\n  ctx.translate(10 * scale, 0);\n\n  ctx.rotate(28 * degToPi);\n  ctx.lineTo(0, 16 * scale);\n  ctx.translate(0, 16 * scale);\n  ctx.rotate(-28 * degToPi);\n\n  ctx.rotate(3.6 * degToPi);\n  ctx.lineTo(0, -10 * scale);\n  ctx.translate(0, -10 * scale);\n  ctx.rotate(-3.6 * degToPi);\n\n  ctx.lineTo(-8 * scale, 0);\n  ctx.closePath();\n  ctx.fill();\n}\n\n\n\nfunction originPos(axisRotateR, axisRotateAngle) {\n  return {\n    x: (gameW / 2) + axisRotateR * Math.cos(axisRotateAngle * degToPi),\n    y: (gameH / 2) + axisRotateR * Math.sin(axisRotateAngle * degToPi),\n  };\n}\n\n\n\n// 以 x 為底的 y 的對數：logxy\nfunction baseLog(x, y) {\n  return Math.log(y) / Math.log(x);\n}\n\n\n\n// 餘弦定理\nfunction cosineFormula(a, b, angle) {\n  return Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(angle * degToPi));\n}\n\nfunction getAngleB(a, b, c) {\n  return Math.acos((a * a + c * c - b * b) / (2 * a * c));\n}\n\n\n\n// 取得某區間的隨機亂數\nfunction getRandom(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n\n\nfunction playSound(instrument, note, duration = '8n', timeout = 0, volume = 0) {\n  if (game.isMuted) return;\n  let synth;\n  switch (instrument) {\n    case 'membrane':\n      setTimeout(() => {\n        synth = new Tone.MembraneSynth().toMaster();\n        synth.triggerAttackRelease(note, duration);\n        synth.volume.value = volume;\n      }, timeout);\n      break;\n    case 'duo':\n      setTimeout(() => {\n        synth = new Tone.DuoSynth().toMaster();\n        synth.triggerAttackRelease(note, duration);\n        synth.volume.value = volume;\n      }, timeout);\n      break;\n    case 'mono':\n      setTimeout(() => {\n        synth = new Tone.MonoSynth().toMaster();\n        synth.triggerAttackRelease(note, duration);\n        synth.volume.value = volume;\n      }, timeout);\n      break;\n    default:\n      setTimeout(() => {\n        synth = new Tone.Synth().toMaster();\n        synth.triggerAttackRelease(note, duration);\n        synth.volume.value = volume;\n      }, timeout);\n      break;\n  }\n}\n\nfunction isMob() {\n  if (navigator.userAgent.match(/Android/i) ||\n    navigator.userAgent.match(/webOS/i) ||\n    navigator.userAgent.match(/iPhone/i) ||\n    navigator.userAgent.match(/iPad/i) ||\n    navigator.userAgent.match(/iPod/i) ||\n    navigator.userAgent.match(/BlackBerry/i) ||\n    navigator.userAgent.match(/Windows Phone/i)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/* 2D Vector Class */\n// class Vec2 {\n//   constructor(x, y) {\n//     this.x = x;\n//     this.y = y;\n//   }\n//   set(x, y) {\n//     this.x = x;\n//     this.y = y;\n//   }\n//   move(x, y) {\n//     this.x += x;\n//     this.y += y;\n//   }\n//   add(v) {\n//     return new Vec2(this.x + v.x, this.y + v.y);\n//   }\n//   sub(v) {\n//     return new Vec2(this.x - v.x, this.y - v.y);\n//   }\n//   mul(s) {\n//     return new Vec2(this.x * s, this.y * s);\n//   }\n//   clone() {\n//     return new Vec2(this.x, this.y);\n//   }\n//   equal(v) {\n//     return this.x === v.x && this.y === v.y;\n//   }\n//   get length() {\n//     return Math.sqrt(this.x * this.x + this.y * this.y);\n//   }\n//   set length(newVal) {\n//     const newLength = this.unit.mul(newVal);\n//     this.set(newLength.x, newLength.y);\n//   }\n//   get angle() {\n//     return Math.atan2(this.y, this.x);\n//   }\n//   get unit() {\n//     return this.mul(1 / this.length);\n//   }\n// }"]}